\subsection{Giới thiệu về WebSocket và Real-time Communication}

\subsubsection{Khái quát}

WebSocket là một protocol cung cấp full-duplex communication channels qua một TCP connection, khác với HTTP traditional request-response pattern cho phép server push data đến client bất kỳ lúc nào mà không cần client request. WebSocket có persistent connection được giữ mở liên tục không cần reconnect cho mỗi message, bi-directional communication cho phép cả client và server gửi messages đến nhau một cách độc lập, low latency do không có HTTP overhead và handshake cho mỗi message, và sử dụng protocol ws:// cho unencrypted connections hoặc wss:// cho TLS encrypted connections trong production. WebSocket đặc biệt phù hợp cho các ứng dụng yêu cầu real-time updates như chat applications, live notifications, collaborative editing, gaming, và financial trading platforms.

\subsubsection{Socket.io và NestJS integration}

Socket.io là một library hỗ trợ real-time, bi-directional communication được xây dựng trên WebSocket với nhiều features bổ sung. Socket.io cung cấp automatic reconnec\-tion tự động kết nối lại khi connection bị mất do network issues, Rooms và Namespaces để group connections cho targeted broadcasting giúp organize clients, acknowledgements với callbacks để confirm message delivery đảm bảo reliable messaging, binary support cho phép gửi binary data như images và files, và fallback mechanism tự động chuyển sang HTTP long-polling khi WebSocket không available do firewalls hoặc proxies.

NestJS cung cấp built-in support cho WebSockets với Socket.io adapter thông qua decorators và architecture patterns quen thuộc. @WebSocketGateway decorator định nghĩa WebSocket gateway class, @SubscribeMessage decorator handle incoming messages từ specific events, @WebSocketServer decorator inject Socket.io server instan\-ce để emit events, Guards và Pipes có thể reuse từ REST APIs cho WebSocket connecti\-ons để validate authentication và transform data, và Interceptors transform data before hoặc after handling messages. Kiến trúc này cho phép developers áp dụng same patterns và best practices từ REST APIs sang WebSocket, giảm learning curve và maintain code consistency.

\subsubsection{Vận dụng vào đề tài}

PM Service WebSocketGateway được xây dựng bằng NestJS với Socket.io adapter để cung cấp real-time communication cho Board view và collaborative editing. Service push updates đến users ngay lập tức khi có events như issue status changed, issue moved (drag-and-drop), sprint started/completed, comment added, hoặc issue assigned, đảm bảo users luôn thấy latest state của Board/Backlog view mà không cần refresh page.

Rooms-based architecture được implement với mỗi project là một Socket.io room, cho phép broadcast events đến tất cả members đang xem project một cách hiệu quả. Issue-level events như status change, assignee update, comment added được broadcast đến project room để tất cả users thấy changes real-time trên Board view. Sprint-level events như sprint started, sprint completed, issue moved to/from sprint được broadcast để update Backlog view và sprint progress bars. Board real-time updates khi một user drag-and-drop issue sang status column khác, WebSocket broadcast event đến tất cả users trong project room, frontend optimistically update UI ngay lập tức và revert nếu server validation fails, đảm bảo smooth collaborative experience khi nhiều users work đồng thời. Collaborative editing indicators hiển thị ai đang edit issue nào, prevent conflict khi nhiều users edit cùng issue, và broadcast typing indicators trong comment section. Authentication được enforce bằng Guards validate JWT token và check project permissions khi clients establish WebSocket connection, ensure chỉ project members mới có thể connect và receive updates phù hợp với roles của họ (Project Lead, Team Member, Viewer).
