<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đặc tả Use Case - Nền tảng SaaS tích hợp AI</title>
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            font-size: 13pt;
            line-height: 1.5;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20mm;
            background: #fff;
        }
        
        h1 {
            text-align: center;
            font-size: 16pt;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        h2 {
            font-size: 14pt;
            font-weight: bold;
            margin-top: 30px;
            margin-bottom: 15px;
            color: #333;
        }
        
        h3 {
            font-size: 13pt;
            font-weight: bold;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        
        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .info-table td, .info-table th {
            border: 1px solid #000;
            padding: 8px 12px;
        }
        
        .uc-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            page-break-inside: avoid;
        }
        
        .uc-table td {
            border: 1px solid #000;
            padding: 10px 12px;
            vertical-align: top;
        }
        
        .uc-table .header-row td {
            font-weight: bold;
        }
        
        .uc-table .label {
            font-weight: bold;
        }
        
        .uc-table .full-width {
            width: 100%;
        }
        
        .table-caption {
            font-weight: bold;
            margin-bottom: 8px;
            font-style: italic;
        }
        
        ol {
            margin: 5px 0;
            padding-left: 25px;
        }
        
        ol li {
            margin-bottom: 3px;
        }
        
        ul {
            margin: 5px 0;
            padding-left: 20px;
            list-style-type: none;
        }
        
        ul li {
            margin-bottom: 3px;
        }
        
        ul li:before {
            content: "- ";
        }
        
        .actor-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .actor-table td, .actor-table th {
            border: 1px solid #000;
            padding: 8px 12px;
            text-align: left;
        }
        
        .actor-table th {
            background-color: #f0f0f0;
            font-weight: bold;
        }
        
        .page-break {
            page-break-before: always;
        }
        
        .toc {
            margin-bottom: 30px;
        }
        
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc ul li:before {
            content: "";
        }
        
        .toc a {
            text-decoration: none;
            color: #000;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<h1>ĐẶC TẢ USE CASE<br>NỀN TẢNG SAAS TÍCH HỢP AI HỖ TRỢ CỘNG TÁC NHÓM</h1>

<table class="info-table">
    <tr>
        <td><strong>Dự án:</strong></td>
        <td>Nền tảng SaaS tích hợp AI hỗ trợ cộng tác nhóm</td>
    </tr>
    <tr>
        <td><strong>Phiên bản:</strong></td>
        <td>1.0</td>
    </tr>
    <tr>
        <td><strong>Ngày cập nhật:</strong></td>
        <td>10/12/2024</td>
    </tr>
    <tr>
        <td><strong>Tác giả:</strong></td>
        <td>Nguyễn Tuấn Đạt</td>
    </tr>
</table>

<h2>Danh sách Actor</h2>

<table class="actor-table">
    <tr>
        <th>Actor</th>
        <th>Mô tả</th>
    </tr>
    <tr>
        <td>User</td>
        <td>Actor tổng quát, đại diện cho tất cả người dùng hệ thống</td>
    </tr>
    <tr>
        <td>Super Admin</td>
        <td>Quản trị viên cấp cao nhất, quản lý toàn bộ hệ thống</td>
    </tr>
    <tr>
        <td>Workspace Owner</td>
        <td>Chủ sở hữu workspace, quản lý workspace và thành viên</td>
    </tr>
    <tr>
        <td>Member</td>
        <td>Thành viên thông thường trong workspace</td>
    </tr>
    <tr>
        <td>Google OAuth Service</td>
        <td>Dịch vụ xác thực của Google, cung cấp đăng nhập/đăng ký qua tài khoản Google</td>
    </tr>
    <tr>
        <td>PM Service</td>
        <td>Hệ thống quản lý dự án bên ngoài (Jira, Trello, Asana)</td>
    </tr>
    <tr>
        <td>Chat Service</td>
        <td>Hệ thống chat bên ngoài (Slack, Discord, MS Teams)</td>
    </tr>
    <tr>
        <td>Meeting Service</td>
        <td>Hệ thống họp trực tuyến (Google Meet, Zoom)</td>
    </tr>
    <tr>
        <td>LLM Provider</td>
        <td>Nhà cung cấp mô hình AI (OpenAI, Anthropic, Google)</td>
    </tr>
</table>

<!-- ==================== UC01: QUẢN LÝ TÀI KHOẢN ==================== -->

<h2>UC01: QUẢN LÝ TÀI KHOẢN</h2>

<!-- UC01.1 -->
<p class="table-caption">Bảng 1.1. Bảng đặc tả chức năng Đăng ký</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Đăng ký</td>
        <td style="width: 30%;">ID: UC01.1</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: User</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn tạo tài khoản mới để sử dụng các dịch vụ của hệ thống.</li>
                <li><strong>Google OAuth Service:</strong> Cung cấp xác thực danh tính qua tài khoản Google.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép người dùng tạo tài khoản mới bằng cách cung cấp email/mật khẩu hoặc đăng ký nhanh qua Google OAuth.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User truy cập trang đăng ký của hệ thống.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User truy cập trang đăng ký.</li>
                <li>Hệ thống hiển thị form đăng ký với các trường: email, mật khẩu, xác nhận mật khẩu, họ tên; và nút "Đăng ký với Google".</li>
                <li>User nhập đầy đủ thông tin và nhấn "Đăng ký".</li>
                <li>Hệ thống kiểm tra định dạng dữ liệu và email chưa tồn tại.</li>
                <li>Hệ thống tạo tài khoản với trạng thái "Chưa xác thực" và auth_provider = "local".</li>
                <li>Hệ thống gửi email xác thực đến địa chỉ email đã đăng ký.</li>
                <li>Hệ thống hiển thị thông báo "Vui lòng kiểm tra email để xác thực tài khoản".</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include UC01.7 (Xác thực tài khoản).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li><strong>A1: Đăng ký bằng Google OAuth:</strong>
                    <ol>
                        <li>User nhấn nút "Đăng ký với Google".</li>
                        <li>Hệ thống chuyển hướng đến Google OAuth consent screen.</li>
                        <li>User chọn tài khoản Google và cấp quyền truy cập (email, profile).</li>
                        <li>Google trả về authorization code.</li>
                        <li>Hệ thống đổi code lấy access token và lấy thông tin user (email, name, avatar).</li>
                        <li>Hệ thống kiểm tra email Google trong database.</li>
                        <li>Hệ thống tạo tài khoản mới với trạng thái "Đã xác thực", auth_provider = "google", google_id = [Google User ID].</li>
                        <li>Hệ thống tự động đăng nhập và chuyển đến Dashboard.</li>
                    </ol>
                </li>
                <li><strong>E1: Email đã tồn tại (đăng ký thường):</strong> Hiển thị lỗi "Email đã được sử dụng".</li>
                <li><strong>E2: Mật khẩu không đủ mạnh:</strong> Hiển thị yêu cầu: tối thiểu 8 ký tự, chứa chữ hoa, số, ký tự đặc biệt.</li>
                <li><strong>E3: Email không hợp lệ:</strong> Hiển thị lỗi "Định dạng email không hợp lệ".</li>
                <li><strong>E4: Mật khẩu xác nhận không khớp:</strong> Hiển thị lỗi "Mật khẩu xác nhận không khớp".</li>
                <li><strong>E5: Email Google đã có tài khoản thường (chưa liên kết Google):</strong>
                    <ol>
                        <li>Hệ thống phát hiện email đã tồn tại với auth_provider = "local".</li>
                        <li>Hiển thị thông báo: "Email này đã được đăng ký. Bạn có muốn liên kết với tài khoản Google không?"</li>
                        <li>Nếu User chọn "Liên kết": Yêu cầu nhập mật khẩu tài khoản hiện tại để xác nhận.</li>
                        <li>Nếu mật khẩu đúng: Cập nhật google_id vào tài khoản, cho phép đăng nhập bằng cả hai phương thức.</li>
                        <li>Nếu User chọn "Hủy": Quay về trang đăng ký.</li>
                    </ol>
                </li>
                <li><strong>E6: Email Google đã có tài khoản Google:</strong> Hiển thị thông báo "Tài khoản đã tồn tại" và chuyển hướng đến trang đăng nhập.</li>
                <li><strong>E7: User từ chối cấp quyền trên Google:</strong> Quay về trang đăng ký với thông báo "Đã hủy đăng ký bằng Google".</li>
                <li><strong>E8: Google OAuth service không khả dụng:</strong> Hiển thị lỗi "Không thể kết nối đến Google. Vui lòng thử lại sau hoặc đăng ký bằng email".</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User tạo được tài khoản (qua email hoặc Google) và có thể truy cập hệ thống.
        </td>
    </tr>
</table>

<!-- UC01.2 -->
<p class="table-caption">Bảng 1.2. Bảng đặc tả chức năng Đăng nhập</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Đăng nhập</td>
        <td style="width: 30%;">ID: UC01.2</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: User</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn truy cập vào hệ thống để sử dụng các chức năng.</li>
                <li><strong>Google OAuth Service:</strong> Cung cấp xác thực danh tính qua tài khoản Google.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép người dùng xác thực danh tính bằng email/mật khẩu hoặc Google OAuth để truy cập hệ thống.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User truy cập trang đăng nhập của hệ thống.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User truy cập trang đăng nhập.</li>
                <li>Hệ thống hiển thị form đăng nhập với các trường: email, mật khẩu; và nút "Đăng nhập với Google".</li>
                <li>User nhập email và mật khẩu, nhấn "Đăng nhập".</li>
                <li>Hệ thống xác thực thông tin đăng nhập.</li>
                <li>Hệ thống tạo session/JWT token cho user.</li>
                <li>Hệ thống ghi log đăng nhập.</li>
                <li>Hệ thống chuyển hướng user đến trang Dashboard.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include UC01.7 (Xác thực tài khoản).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li><strong>A1: Đăng nhập bằng Google OAuth:</strong>
                    <ol>
                        <li>User nhấn nút "Đăng nhập với Google".</li>
                        <li>Hệ thống chuyển hướng đến Google OAuth consent screen.</li>
                        <li>User chọn tài khoản Google.</li>
                        <li>Google trả về authorization code.</li>
                        <li>Hệ thống đổi code lấy access token và lấy thông tin user.</li>
                        <li>Hệ thống tìm tài khoản theo google_id hoặc email.</li>
                        <li>Hệ thống tạo session/JWT token.</li>
                        <li>Hệ thống chuyển hướng đến Dashboard.</li>
                    </ol>
                </li>
                <li><strong>A2: Chọn "Ghi nhớ đăng nhập":</strong> Tạo refresh token với thời hạn 30 ngày.</li>
                <li><strong>E1: Email không tồn tại:</strong> Hiển thị lỗi "Email hoặc mật khẩu không đúng".</li>
                <li><strong>E2: Mật khẩu sai:</strong> Hiển thị lỗi, tăng số lần thử sai.</li>
                <li><strong>E3: Sai quá 5 lần:</strong> Khóa tài khoản tạm thời 15 phút.</li>
                <li><strong>E4: Tài khoản chưa xác thực:</strong> Hiển thị thông báo và gửi lại email xác thực.</li>
                <li><strong>E5: Tài khoản chỉ có Google (đăng nhập bằng email/password):</strong>
                    <ol>
                        <li>Hệ thống phát hiện tài khoản có auth_provider = "google" và không có password.</li>
                        <li>Hiển thị thông báo: "Tài khoản này được đăng ký bằng Google. Vui lòng đăng nhập bằng Google hoặc đặt mật khẩu."</li>
                        <li>Cung cấp link "Đặt mật khẩu" để user có thể tạo password cho tài khoản.</li>
                    </ol>
                </li>
                <li><strong>E6: Google OAuth - Email chưa có tài khoản:</strong>
                    <ol>
                        <li>Hệ thống không tìm thấy tài khoản với email hoặc google_id tương ứng.</li>
                        <li>Hiển thị thông báo: "Chưa có tài khoản với email này. Bạn có muốn tạo tài khoản mới không?"</li>
                        <li>Nếu User chọn "Tạo tài khoản": Tự động tạo tài khoản mới với thông tin từ Google (chuyển sang flow UC01.1 - A1).</li>
                        <li>Nếu User chọn "Hủy": Quay về trang đăng nhập.</li>
                    </ol>
                </li>
                <li><strong>E7: Google OAuth - Email có tài khoản thường chưa liên kết:</strong>
                    <ol>
                        <li>Hệ thống tìm thấy tài khoản với email nhưng chưa có google_id.</li>
                        <li>Hiển thị thông báo: "Email này đã có tài khoản. Bạn có muốn liên kết với Google không?"</li>
                        <li>Nếu User chọn "Liên kết": Yêu cầu nhập mật khẩu tài khoản để xác nhận danh tính.</li>
                        <li>Nếu mật khẩu đúng: Cập nhật google_id, đăng nhập thành công.</li>
                        <li>Nếu mật khẩu sai: Hiển thị lỗi, cho phép thử lại hoặc hủy.</li>
                        <li>Nếu User chọn "Hủy": Quay về trang đăng nhập, yêu cầu đăng nhập bằng email/password.</li>
                    </ol>
                </li>
                <li><strong>E8: Google OAuth - Tài khoản bị khóa:</strong> Hiển thị thông báo tài khoản bị khóa và lý do.</li>
                <li><strong>E9: User từ chối cấp quyền trên Google:</strong> Quay về trang đăng nhập với thông báo "Đã hủy đăng nhập bằng Google".</li>
                <li><strong>E10: Google OAuth service không khả dụng:</strong> Hiển thị lỗi "Không thể kết nối đến Google. Vui lòng thử lại sau hoặc đăng nhập bằng email".</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User đăng nhập thành công và truy cập được các chức năng của hệ thống.
        </td>
    </tr>
</table>

<!-- UC01.3 -->
<p class="table-caption">Bảng 1.3. Bảng đặc tả chức năng Đăng xuất</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Đăng xuất</td>
        <td style="width: 30%;">ID: UC01.3</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: User</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn kết thúc phiên làm việc an toàn.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép người dùng kết thúc phiên đăng nhập hiện tại và thoát khỏi hệ thống.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User nhấn nút "Đăng xuất" trong giao diện.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User nhấn nút "Đăng xuất".</li>
                <li>Hệ thống hiển thị dialog xác nhận đăng xuất.</li>
                <li>User xác nhận đăng xuất.</li>
                <li>Hệ thống hủy session/token hiện tại.</li>
                <li>Hệ thống ghi log đăng xuất.</li>
                <li>Hệ thống chuyển hướng user về trang đăng nhập.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User đăng xuất thành công và phiên làm việc được kết thúc an toàn.
        </td>
    </tr>
</table>

<!-- UC01.4 -->
<p class="table-caption">Bảng 1.4. Bảng đặc tả chức năng Cập nhật thông tin</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Cập nhật thông tin</td>
        <td style="width: 30%;">ID: UC01.4</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: User</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn cập nhật thông tin cá nhân như họ tên, avatar, số điện thoại.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép người dùng chỉnh sửa và cập nhật thông tin cá nhân trong hồ sơ tài khoản.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User truy cập trang Profile/Hồ sơ cá nhân.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User truy cập trang Profile.</li>
                <li>Hệ thống hiển thị thông tin hiện tại của user.</li>
                <li>User chỉnh sửa các trường thông tin: họ tên, avatar, số điện thoại.</li>
                <li>User nhấn "Lưu thay đổi".</li>
                <li>Hệ thống validate dữ liệu đầu vào.</li>
                <li>Hệ thống cập nhật thông tin vào database.</li>
                <li>Hệ thống hiển thị thông báo "Cập nhật thành công".</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Số điện thoại không hợp lệ → Hiển thị lỗi định dạng.</li>
                <li>E2: Avatar vượt quá 5MB → Hiển thị lỗi kích thước file.</li>
                <li>A1: Upload avatar mới → Resize ảnh về kích thước chuẩn và lưu vào storage.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Thông tin cá nhân của user được cập nhật thành công.
        </td>
    </tr>
</table>

<!-- UC01.5 -->
<p class="table-caption">Bảng 1.5. Bảng đặc tả chức năng Đổi mật khẩu</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Đổi mật khẩu</td>
        <td style="width: 30%;">ID: UC01.5</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: User</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn thay đổi mật khẩu để tăng cường bảo mật tài khoản.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép người dùng thay đổi mật khẩu đăng nhập hiện tại sang mật khẩu mới.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User chọn "Đổi mật khẩu" trong trang cài đặt tài khoản.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User chọn "Đổi mật khẩu".</li>
                <li>Hệ thống hiển thị form đổi mật khẩu.</li>
                <li>User nhập mật khẩu hiện tại.</li>
                <li>User nhập mật khẩu mới và xác nhận mật khẩu mới.</li>
                <li>User nhấn "Đổi mật khẩu".</li>
                <li>Hệ thống xác thực mật khẩu hiện tại.</li>
                <li>Hệ thống hash và lưu mật khẩu mới.</li>
                <li>Hệ thống hủy tất cả session khác của user.</li>
                <li>Hệ thống gửi email thông báo đổi mật khẩu thành công.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Mật khẩu hiện tại sai → Hiển thị lỗi "Mật khẩu không đúng".</li>
                <li>E2: Mật khẩu mới trùng mật khẩu cũ → Hiển thị lỗi "Vui lòng chọn mật khẩu khác".</li>
                <li>E3: Xác nhận không khớp → Hiển thị lỗi "Mật khẩu xác nhận không khớp".</li>
                <li>E4: Mật khẩu mới không đủ mạnh → Hiển thị yêu cầu về độ mạnh mật khẩu.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Mật khẩu được thay đổi thành công và các phiên đăng nhập khác bị hủy.
        </td>
    </tr>
</table>

<!-- UC01.6 -->
<p class="table-caption">Bảng 1.6. Bảng đặc tả chức năng Quên mật khẩu</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Quên mật khẩu</td>
        <td style="width: 30%;">ID: UC01.6</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: User</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn khôi phục quyền truy cập tài khoản khi quên mật khẩu.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép người dùng khôi phục mật khẩu thông qua email đã đăng ký.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User chọn "Quên mật khẩu" tại trang đăng nhập.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User chọn "Quên mật khẩu".</li>
                <li>Hệ thống hiển thị form nhập email.</li>
                <li>User nhập email đã đăng ký.</li>
                <li>User nhấn "Gửi yêu cầu".</li>
                <li>Hệ thống kiểm tra email tồn tại.</li>
                <li>Hệ thống tạo reset token (hết hạn sau 1 giờ).</li>
                <li>Hệ thống gửi email chứa link reset mật khẩu.</li>
                <li>User click link trong email.</li>
                <li>Hệ thống hiển thị form đặt mật khẩu mới.</li>
                <li>User nhập mật khẩu mới và xác nhận.</li>
                <li>Hệ thống validate và lưu mật khẩu mới.</li>
                <li>Hệ thống hủy reset token.</li>
                <li>Hệ thống hiển thị thông báo thành công.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Email không tồn tại → Vẫn hiển thị "Đã gửi email" (bảo mật).</li>
                <li>E2: Token hết hạn → Hiển thị lỗi, yêu cầu gửi lại.</li>
                <li>E3: Token đã sử dụng → Hiển thị lỗi "Link đã được sử dụng".</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User khôi phục được mật khẩu và có thể đăng nhập với mật khẩu mới.
        </td>
    </tr>
</table>

<!-- UC01.7 -->
<p class="table-caption">Bảng 1.7. Bảng đặc tả chức năng Xác thực tài khoản</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xác thực tài khoản</td>
        <td style="width: 30%;">ID: UC01.7</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: User</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn kích hoạt tài khoản để sử dụng đầy đủ chức năng hệ thống.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng xác thực email của người dùng để kích hoạt tài khoản.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Được gọi từ UC01.1 (Đăng ký) hoặc UC01.2 (Đăng nhập).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Hệ thống tạo verification token.</li>
                <li>Hệ thống gửi email chứa link xác thực.</li>
                <li>User click link xác thực trong email.</li>
                <li>Hệ thống kiểm tra token hợp lệ.</li>
                <li>Hệ thống cập nhật trạng thái tài khoản thành "Đã xác thực".</li>
                <li>Hệ thống hiển thị thông báo "Xác thực thành công".</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Token hết hạn (24 giờ) → Hiển thị lỗi, cho phép gửi lại email xác thực.</li>
                <li>A1: Gửi lại email xác thực → Tạo token mới, hủy token cũ.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Tài khoản được xác thực và kích hoạt thành công.
        </td>
    </tr>
</table>

<!-- ==================== UC02: QUẢN LÝ WORKSPACE ==================== -->

<h2 class="page-break">UC02: QUẢN LÝ WORKSPACE</h2>

<!-- UC02.1 -->
<p class="table-caption">Bảng 2.1. Bảng đặc tả chức năng Tạo workspace</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Tạo workspace</td>
        <td style="width: 30%;">ID: UC02.1</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Workspace Owner:</strong> Muốn tạo không gian làm việc mới cho nhóm/dự án.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép người dùng tạo workspace mới để quản lý nhóm làm việc và dự án.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User chọn "Tạo workspace mới" trong giao diện.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User chọn "Tạo workspace mới".</li>
                <li>Hệ thống hiển thị form tạo workspace.</li>
                <li>User nhập tên workspace và mô tả.</li>
                <li>User upload logo (tùy chọn).</li>
                <li>User chọn template (nếu có).</li>
                <li>User nhấn "Tạo".</li>
                <li>Hệ thống validate dữ liệu đầu vào.</li>
                <li>Hệ thống tạo workspace trong database.</li>
                <li>Hệ thống gán người tạo làm Owner.</li>
                <li>Hệ thống tạo các channel mặc định (#general, #random).</li>
                <li>Hệ thống chuyển hướng đến workspace mới.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Tên workspace trống → Hiển thị lỗi "Vui lòng nhập tên workspace".</li>
                <li>E2: Tên workspace đã tồn tại → Hiển thị lỗi, yêu cầu đổi tên.</li>
                <li>E3: Logo vượt quá 5MB → Hiển thị lỗi kích thước file.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Workspace mới được tạo thành công và user trở thành Owner.
        </td>
    </tr>
</table>

<!-- UC02.2 -->
<p class="table-caption">Bảng 2.2. Bảng đặc tả chức năng Cấu hình workspace</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Cấu hình workspace</td>
        <td style="width: 30%;">ID: UC02.2</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Workspace Owner:</strong> Muốn thiết lập các tùy chọn và tích hợp cho workspace.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép Owner cấu hình các thiết lập của workspace như thông tin chung, tích hợp bên ngoài, và cấu hình AI.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Owner truy cập Settings của workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Owner truy cập Workspace Settings.</li>
                <li>Hệ thống hiển thị các tab cấu hình: General, Integrations, AI, Permissions.</li>
                <li>Owner chỉnh sửa thông tin chung (tên, mô tả, logo).</li>
                <li>Owner cấu hình tích hợp (PM Service, Chat Service, Meeting Service).</li>
                <li>Owner cấu hình LLM Provider (API key, model).</li>
                <li>Owner thiết lập quyền mặc định cho Member.</li>
                <li>Owner nhấn "Lưu cấu hình".</li>
                <li>Hệ thống validate và lưu settings.</li>
                <li>Hệ thống hiển thị thông báo thành công.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: API key không hợp lệ → Hiển thị lỗi "Không thể kết nối đến dịch vụ".</li>
                <li>E2: LLM Provider không phản hồi → Hiển thị cảnh báo, vẫn cho phép lưu.</li>
                <li>A1: Test kết nối → Gửi request test đến service bên ngoài.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Cấu hình workspace được lưu và áp dụng thành công.
        </td>
    </tr>
</table>

<!-- UC02.3 -->
<p class="table-caption">Bảng 2.3. Bảng đặc tả chức năng Xem danh sách workspace</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xem danh sách workspace</td>
        <td style="width: 30%;">ID: UC02.3</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Super Admin, Workspace Owner, Member</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn xem tất cả workspace mà mình tham gia.</li>
                <li><strong>Super Admin:</strong> Muốn xem tất cả workspace trong hệ thống để quản lý.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng hiển thị danh sách tất cả workspace mà người dùng có quyền truy cập.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User truy cập trang Workspace/Dashboard.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User truy cập trang Workspace.</li>
                <li>Hệ thống truy vấn danh sách workspace của user.</li>
                <li>Hệ thống hiển thị danh sách với thông tin: tên, role, số thành viên, trạng thái.</li>
                <li>User chọn workspace để truy cập.</li>
                <li>Hệ thống chuyển đến workspace được chọn.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span>
            <ul>
                <li>Extend UC02.4 (Khóa workspace) - chỉ Super Admin.</li>
                <li>Extend UC02.5 (Mở khóa workspace) - chỉ Super Admin.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>A1: Tìm kiếm workspace → Lọc danh sách theo keyword.</li>
                <li>A2: Sắp xếp theo tiêu chí → Sắp xếp theo tên/ngày tạo/số thành viên.</li>
                <li>A3: Super Admin xem tất cả → Hiển thị tất cả workspace trong hệ thống.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User xem được danh sách workspace và có thể truy cập vào workspace mong muốn.
        </td>
    </tr>
</table>

<!-- UC02.4 -->
<p class="table-caption">Bảng 2.4. Bảng đặc tả chức năng Khóa workspace</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Khóa workspace</td>
        <td style="width: 30%;">ID: UC02.4</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Super Admin</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Super Admin:</strong> Muốn tạm ngưng hoạt động của workspace vi phạm chính sách.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép Super Admin khóa workspace, ngăn tất cả thành viên truy cập.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Super Admin chọn "Khóa workspace" từ danh sách workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Super Admin chọn workspace cần khóa từ danh sách.</li>
                <li>Hệ thống hiển thị thông tin workspace.</li>
                <li>Super Admin nhấn "Khóa workspace".</li>
                <li>Hệ thống hiển thị dialog xác nhận với trường nhập lý do.</li>
                <li>Super Admin nhập lý do khóa và xác nhận.</li>
                <li>Hệ thống cập nhật trạng thái workspace thành "Locked".</li>
                <li>Hệ thống gửi email thông báo cho Owner của workspace.</li>
                <li>Hệ thống ghi audit log.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Extend từ UC02.3 (Xem danh sách workspace).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Workspace bị khóa và tất cả thành viên không thể truy cập.
        </td>
    </tr>
</table>

<!-- UC02.5 -->
<p class="table-caption">Bảng 2.5. Bảng đặc tả chức năng Mở khóa workspace</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Mở khóa workspace</td>
        <td style="width: 30%;">ID: UC02.5</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Super Admin</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Super Admin:</strong> Muốn kích hoạt lại workspace sau khi vấn đề đã được giải quyết.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép Super Admin mở khóa workspace đã bị khóa trước đó.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Super Admin chọn "Mở khóa" cho workspace đang bị khóa.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Super Admin chọn workspace bị khóa từ danh sách.</li>
                <li>Hệ thống hiển thị thông tin workspace và lý do khóa.</li>
                <li>Super Admin nhấn "Mở khóa".</li>
                <li>Hệ thống hiển thị xác nhận.</li>
                <li>Super Admin xác nhận mở khóa.</li>
                <li>Hệ thống cập nhật trạng thái workspace thành "Active".</li>
                <li>Hệ thống gửi email thông báo cho Owner.</li>
                <li>Hệ thống ghi audit log.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Extend từ UC02.3 (Xem danh sách workspace).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Workspace được mở khóa và hoạt động bình thường trở lại.
        </td>
    </tr>
</table>

<!-- UC02.6 -->
<p class="table-caption">Bảng 2.6. Bảng đặc tả chức năng Xem dashboard</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xem dashboard</td>
        <td style="width: 30%;">ID: UC02.6</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Workspace Owner:</strong> Muốn xem tổng quan hoạt động và thống kê của workspace.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng hiển thị dashboard với các thống kê và biểu đồ về hoạt động của workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Owner truy cập trang Dashboard của workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Owner truy cập Dashboard.</li>
                <li>Hệ thống truy vấn dữ liệu thống kê.</li>
                <li>Hệ thống hiển thị các widget: số thành viên, số tệp tin, hoạt động gần đây.</li>
                <li>Hệ thống hiển thị biểu đồ sử dụng AI (số request, token usage).</li>
                <li>Hệ thống hiển thị top contributors.</li>
                <li>Owner có thể chọn khoảng thời gian để filter dữ liệu.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>A1: Export báo cáo → Xuất dữ liệu dashboard sang PDF/Excel.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Owner xem được tổng quan hoạt động của workspace.
        </td>
    </tr>
</table>

<!-- UC02.7 -->
<p class="table-caption">Bảng 2.7. Bảng đặc tả chức năng Xem audit log</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xem audit log</td>
        <td style="width: 30%;">ID: UC02.7</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner, Super Admin</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Workspace Owner:</strong> Muốn theo dõi lịch sử hoạt động trong workspace.</li>
                <li><strong>Super Admin:</strong> Muốn giám sát hoạt động của tất cả workspace.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng hiển thị lịch sử các hoạt động trong workspace để theo dõi và kiểm tra.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Owner/Super Admin truy cập trang Audit Log.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User truy cập Audit Log.</li>
                <li>Hệ thống truy vấn logs từ database.</li>
                <li>Hệ thống hiển thị danh sách với: thời gian, user, hành động, đối tượng, IP.</li>
                <li>User có thể lọc theo tiêu chí (user, action type, date range).</li>
                <li>User có thể xuất báo cáo.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>A1: Export audit log → Tạo file CSV/PDF với dữ liệu đã filter.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User xem được lịch sử hoạt động chi tiết của workspace.
        </td>
    </tr>
</table>

<!-- ==================== UC03: QUẢN LÝ THÀNH VIÊN ==================== -->

<h2 class="page-break">UC03: QUẢN LÝ THÀNH VIÊN</h2>

<!-- UC03.1 -->
<p class="table-caption">Bảng 3.1. Bảng đặc tả chức năng Mời thành viên</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Mời thành viên</td>
        <td style="width: 30%;">ID: UC03.1</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Workspace Owner:</strong> Muốn thêm thành viên mới vào workspace để cộng tác.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép Owner gửi lời mời tham gia workspace đến người dùng qua email.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Owner chọn "Mời thành viên" trong trang quản lý thành viên.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Owner chọn "Mời thành viên".</li>
                <li>Hệ thống hiển thị form mời với trường nhập email.</li>
                <li>Owner nhập một hoặc nhiều email.</li>
                <li>Owner chọn role mặc định (Member).</li>
                <li>Owner nhấn "Gửi lời mời".</li>
                <li>Hệ thống validate định dạng email.</li>
                <li>Hệ thống tạo invitation records.</li>
                <li>Hệ thống gửi email mời (Include UC03.5).</li>
                <li>Hệ thống hiển thị thông báo thành công.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include UC03.5 (Gửi email mời).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Email đã là thành viên → Bỏ qua và thông báo "Đã là thành viên".</li>
                <li>E2: Email không hợp lệ → Hiển thị lỗi định dạng email.</li>
                <li>A1: Nhập nhiều email cùng lúc → Xử lý batch và hiển thị kết quả từng email.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Lời mời được gửi đến email và người được mời có thể tham gia workspace.
        </td>
    </tr>
</table>

<!-- UC03.2 -->
<p class="table-caption">Bảng 3.2. Bảng đặc tả chức năng Xóa thành viên</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xóa thành viên</td>
        <td style="width: 30%;">ID: UC03.2</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Workspace Owner:</strong> Muốn loại bỏ thành viên không còn cần thiết hoặc vi phạm.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép Owner loại bỏ thành viên khỏi workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Owner chọn "Xóa" cho một thành viên trong danh sách.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Owner chọn thành viên cần xóa từ danh sách.</li>
                <li>Hệ thống hiển thị thông tin thành viên.</li>
                <li>Owner nhấn "Xóa khỏi workspace".</li>
                <li>Hệ thống hiển thị xác nhận.</li>
                <li>Owner xác nhận xóa.</li>
                <li>Hệ thống cập nhật membership (soft delete).</li>
                <li>Hệ thống thu hồi tất cả quyền của thành viên.</li>
                <li>Hệ thống gửi email thông báo cho thành viên bị xóa.</li>
                <li>Hệ thống ghi audit log.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Xóa Owner cuối cùng → Không cho phép, yêu cầu chuyển quyền Owner trước.</li>
                <li>A1: Chọn giữ lại dữ liệu → Dữ liệu của thành viên được gán cho "Deleted User".</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Thành viên bị loại khỏi workspace và mất quyền truy cập.
        </td>
    </tr>
</table>

<!-- UC03.3 -->
<p class="table-caption">Bảng 3.3. Bảng đặc tả chức năng Phân quyền</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Phân quyền</td>
        <td style="width: 30%;">ID: UC03.3</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Workspace Owner:</strong> Muốn quản lý quyền hạn của từng thành viên trong workspace.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép Owner thay đổi role và quyền hạn của thành viên.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Owner chọn "Phân quyền" cho một thành viên.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Owner chọn thành viên cần phân quyền.</li>
                <li>Hệ thống hiển thị quyền hiện tại của thành viên.</li>
                <li>Owner chọn role mới hoặc tùy chỉnh permissions.</li>
                <li>Owner nhấn "Lưu".</li>
                <li>Hệ thống cập nhật permissions trong database.</li>
                <li>Hệ thống gửi thông báo cho thành viên về thay đổi quyền.</li>
                <li>Hệ thống ghi audit log.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span>
            <ul>
                <li>Extend UC03.6 (Cấp quyền Owner).</li>
                <li>Extend UC03.7 (Thu hồi quyền Owner).</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Quyền của thành viên được cập nhật thành công.
        </td>
    </tr>
</table>

<!-- UC03.4 -->
<p class="table-caption">Bảng 3.4. Bảng đặc tả chức năng Xem danh sách thành viên</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xem danh sách thành viên</td>
        <td style="width: 30%;">ID: UC03.4</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner, Member</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn xem danh sách tất cả thành viên trong workspace.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng hiển thị danh sách tất cả thành viên trong workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User truy cập trang Members của workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User truy cập trang Members.</li>
                <li>Hệ thống truy vấn danh sách thành viên.</li>
                <li>Hệ thống hiển thị danh sách với: avatar, tên, email, role, ngày tham gia.</li>
                <li>User có thể tìm kiếm hoặc lọc theo role.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>A1: Tìm kiếm thành viên → Lọc theo tên hoặc email.</li>
                <li>A2: Lọc theo role → Hiển thị chỉ Owner hoặc Member.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User xem được danh sách đầy đủ thành viên trong workspace.
        </td>
    </tr>
</table>

<!-- UC03.5 -->
<p class="table-caption">Bảng 3.5. Bảng đặc tả chức năng Gửi email mời</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Gửi email mời</td>
        <td style="width: 30%;">ID: UC03.5</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: System</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>System:</strong> Cần gửi email chứa link mời tham gia workspace.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng hệ thống tự động gửi email chứa link invitation đến người được mời.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Được gọi từ UC03.1 (Mời thành viên).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> Internal.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Hệ thống tạo invitation token (hết hạn sau 7 ngày).</li>
                <li>Hệ thống render email template với link invite.</li>
                <li>Hệ thống gửi email qua SMTP service.</li>
                <li>Hệ thống cập nhật trạng thái invitation = "Sent".</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include bởi UC03.1 (Mời thành viên).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Email gửi thất bại → Retry 3 lần, sau đó đánh dấu "Failed".</li>
                <li>A1: Gửi lại lời mời → Hủy token cũ, tạo token mới.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Email mời được gửi thành công đến người nhận.
        </td>
    </tr>
</table>

<!-- UC03.6 -->
<p class="table-caption">Bảng 3.6. Bảng đặc tả chức năng Cấp quyền Owner</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Cấp quyền Owner</td>
        <td style="width: 30%;">ID: UC03.6</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Workspace Owner:</strong> Muốn nâng cấp một Member thành Owner để chia sẻ quyền quản lý.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép Owner hiện tại cấp quyền Owner cho một Member.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Owner chọn "Cấp quyền Owner" cho một Member.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Owner chọn thành viên cần cấp quyền.</li>
                <li>Hệ thống kiểm tra role hiện tại là Member.</li>
                <li>Owner chọn "Cấp quyền Owner".</li>
                <li>Hệ thống hiển thị cảnh báo về quyền hạn của Owner.</li>
                <li>Owner xác nhận.</li>
                <li>Hệ thống cập nhật role = Owner.</li>
                <li>Hệ thống gửi email thông báo cho thành viên.</li>
                <li>Hệ thống ghi audit log.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Extend từ UC03.3 (Phân quyền).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Member được nâng cấp thành Owner với đầy đủ quyền quản lý.
        </td>
    </tr>
</table>

<!-- UC03.7 -->
<p class="table-caption">Bảng 3.7. Bảng đặc tả chức năng Thu hồi quyền Owner</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Thu hồi quyền Owner</td>
        <td style="width: 30%;">ID: UC03.7</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Workspace Owner:</strong> Muốn hạ cấp một Owner khác thành Member.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép Owner thu hồi quyền Owner của một Owner khác.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Owner chọn "Thu hồi quyền Owner" cho một Owner khác.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Owner chọn Owner cần thu hồi quyền.</li>
                <li>Hệ thống kiểm tra số lượng Owner trong workspace.</li>
                <li>Owner chọn "Thu hồi quyền Owner".</li>
                <li>Hệ thống hiển thị xác nhận.</li>
                <li>Owner xác nhận.</li>
                <li>Hệ thống cập nhật role = Member.</li>
                <li>Hệ thống gửi email thông báo.</li>
                <li>Hệ thống ghi audit log.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Extend từ UC03.3 (Phân quyền).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Chỉ còn 1 Owner → Không cho phép thu hồi, hiển thị lỗi.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Owner bị hạ cấp thành Member và mất quyền quản lý.
        </td>
    </tr>
</table>

<!-- ==================== UC04: QUẢN LÝ TỆP TIN ==================== -->

<h2 class="page-break">UC04: QUẢN LÝ TỆP TIN</h2>

<!-- UC04.1 -->
<p class="table-caption">Bảng 4.1. Bảng đặc tả chức năng Upload tệp</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Upload tệp</td>
        <td style="width: 30%;">ID: UC04.1</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner, Member</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn tải tệp tin lên workspace để chia sẻ với thành viên khác.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép thành viên tải tệp tin lên workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User chọn "Upload tệp" trong giao diện quản lý tệp.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User chọn "Upload tệp".</li>
                <li>Hệ thống kiểm tra quyền truy cập (Include UC04.6).</li>
                <li>Hệ thống hiển thị dialog upload.</li>
                <li>User chọn tệp từ máy tính.</li>
                <li>Hệ thống validate loại tệp và kích thước.</li>
                <li>User chọn thư mục đích (nếu có).</li>
                <li>User nhấn "Upload".</li>
                <li>Hệ thống hiển thị progress bar.</li>
                <li>Hệ thống lưu tệp vào storage.</li>
                <li>Hệ thống tạo metadata record.</li>
                <li>Hệ thống trigger AI để xử lý/index tệp (nếu cần).</li>
                <li>Hệ thống hiển thị thông báo thành công.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include UC04.6 (Kiểm tra quyền truy cập).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Vượt quá kích thước cho phép (100MB) → Hiển thị lỗi.</li>
                <li>E2: Loại tệp không được hỗ trợ → Hiển thị danh sách loại tệp hợp lệ.</li>
                <li>E3: Không có quyền upload → Hiển thị lỗi 403 Forbidden.</li>
                <li>A1: Drag & drop nhiều tệp → Xử lý batch upload.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Tệp được upload thành công và có thể truy cập bởi các thành viên.
        </td>
    </tr>
</table>

<!-- UC04.2 -->
<p class="table-caption">Bảng 4.2. Bảng đặc tả chức năng Xem danh sách tệp</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xem danh sách tệp</td>
        <td style="width: 30%;">ID: UC04.2</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner, Member</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn xem tất cả tệp tin trong workspace.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng hiển thị danh sách tất cả tệp tin trong workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User truy cập trang Files của workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User truy cập trang Files.</li>
                <li>Hệ thống truy vấn danh sách tệp.</li>
                <li>Hệ thống hiển thị danh sách với: tên, loại, kích thước, người upload, ngày upload.</li>
                <li>User có thể chọn chế độ xem (list/grid).</li>
                <li>User có thể sắp xếp theo tiêu chí.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>A1: Lọc theo loại tệp → Hiển thị chỉ loại tệp được chọn.</li>
                <li>A2: Phân trang → Hiển thị 20 tệp/trang.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User xem được danh sách tệp tin trong workspace.
        </td>
    </tr>
</table>

<!-- UC04.3 -->
<p class="table-caption">Bảng 4.3. Bảng đặc tả chức năng Tải tệp</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Tải tệp</td>
        <td style="width: 30%;">ID: UC04.3</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner, Member</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn tải tệp tin về máy tính cá nhân.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép thành viên download tệp tin từ workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User chọn "Tải xuống" cho một tệp.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User chọn tệp cần tải.</li>
                <li>Hệ thống kiểm tra quyền truy cập (Include UC04.6).</li>
                <li>User nhấn "Tải xuống".</li>
                <li>Hệ thống tạo signed URL.</li>
                <li>Hệ thống bắt đầu download.</li>
                <li>Hệ thống ghi log download.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include UC04.6 (Kiểm tra quyền truy cập).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Không có quyền → Hiển thị lỗi 403 Forbidden.</li>
                <li>E2: Tệp không tồn tại → Hiển thị lỗi 404 Not Found.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Tệp được tải về máy tính của user thành công.
        </td>
    </tr>
</table>

<!-- UC04.4 -->
<p class="table-caption">Bảng 4.4. Bảng đặc tả chức năng Xóa tệp</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xóa tệp</td>
        <td style="width: 30%;">ID: UC04.4</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner, Member</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn xóa tệp tin không còn cần thiết.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép xóa tệp tin khỏi workspace.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User chọn "Xóa" cho một tệp.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User chọn tệp cần xóa.</li>
                <li>Hệ thống kiểm tra quyền (Include UC04.6).</li>
                <li>User nhấn "Xóa".</li>
                <li>Hệ thống hiển thị xác nhận.</li>
                <li>User xác nhận xóa.</li>
                <li>Hệ thống soft delete (chuyển vào Trash).</li>
                <li>Hệ thống ghi audit log.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include UC04.6 (Kiểm tra quyền truy cập).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Không có quyền xóa → Hiển thị lỗi.</li>
                <li>A1: Xóa vĩnh viễn từ Trash → Hard delete sau 30 ngày hoặc theo yêu cầu Owner.</li>
                <li>A2: Khôi phục từ Trash → Chuyển tệp về vị trí ban đầu.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Tệp được chuyển vào Trash và có thể khôi phục trong 30 ngày.
        </td>
    </tr>
</table>

<!-- UC04.5 -->
<p class="table-caption">Bảng 4.5. Bảng đặc tả chức năng Tìm kiếm tệp</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Tìm kiếm tệp</td>
        <td style="width: 30%;">ID: UC04.5</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner, Member</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn tìm nhanh tệp tin theo từ khóa hoặc bộ lọc.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng tìm kiếm tệp tin trong workspace theo nhiều tiêu chí.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User nhập từ khóa vào ô tìm kiếm.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User nhập từ khóa tìm kiếm.</li>
                <li>User có thể áp dụng bộ lọc (loại tệp, ngày, người upload).</li>
                <li>User nhấn "Tìm kiếm" hoặc Enter.</li>
                <li>Hệ thống tìm kiếm full-text trong metadata.</li>
                <li>Hệ thống tìm kiếm nội dung tệp (nếu được index).</li>
                <li>Hệ thống hiển thị kết quả với highlight từ khóa.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>A1: Tìm kiếm AI-powered → Sử dụng semantic search để tìm tệp liên quan.</li>
                <li>A2: Không có kết quả → Đề xuất từ khóa tương tự.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User tìm được tệp tin phù hợp với tiêu chí tìm kiếm.
        </td>
    </tr>
</table>

<!-- UC04.6 -->
<p class="table-caption">Bảng 4.6. Bảng đặc tả chức năng Kiểm tra quyền truy cập</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Kiểm tra quyền truy cập</td>
        <td style="width: 30%;">ID: UC04.6</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: System</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>System:</strong> Cần xác thực quyền của user trước khi thực hiện thao tác với tệp.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng hệ thống kiểm tra quyền truy cập của user đối với tệp/thư mục.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Được gọi từ UC04.1, UC04.3, UC04.4.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> Internal.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Hệ thống lấy thông tin user và role.</li>
                <li>Hệ thống lấy thông tin permission của tệp/thư mục.</li>
                <li>Hệ thống kiểm tra nếu user là Owner → cho phép tất cả.</li>
                <li>Hệ thống kiểm tra quyền cụ thể (read/write/delete).</li>
                <li>Hệ thống trả về kết quả: cho phép hoặc từ chối.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include bởi UC04.1, UC04.3, UC04.4.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Không có quyền → Trả về lỗi 403 Forbidden.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Hệ thống xác định được user có quyền thực hiện thao tác hay không.
        </td>
    </tr>
</table>

<!-- ==================== UC05: QUẢN LÝ THÔNG BÁO ==================== -->

<h2 class="page-break">UC05: QUẢN LÝ THÔNG BÁO</h2>

<!-- UC05.1 -->
<p class="table-caption">Bảng 5.1. Bảng đặc tả chức năng Xem thông báo</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xem thông báo</td>
        <td style="width: 30%;">ID: UC05.1</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: User</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn xem các thông báo về hoạt động liên quan đến mình.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng hiển thị danh sách thông báo của người dùng.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User click vào icon thông báo (bell icon).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User click icon thông báo.</li>
                <li>Hệ thống truy vấn danh sách thông báo của user.</li>
                <li>Hệ thống hiển thị dropdown với các thông báo gần đây.</li>
                <li>User click vào một thông báo.</li>
                <li>Hệ thống đánh dấu thông báo đã đọc.</li>
                <li>Hệ thống chuyển đến nội dung liên quan.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>A1: Xem tất cả thông báo → Chuyển đến trang Notifications đầy đủ.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User xem được thông báo và có thể truy cập nội dung liên quan.
        </td>
    </tr>
</table>

<!-- UC05.2 -->
<p class="table-caption">Bảng 5.2. Bảng đặc tả chức năng Cấu hình thông báo</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Cấu hình thông báo</td>
        <td style="width: 30%;">ID: UC05.2</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: User</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Thấp</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn tùy chỉnh loại thông báo và kênh nhận thông báo.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép user thiết lập preferences cho thông báo.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User truy cập Settings > Notifications.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User truy cập Settings > Notifications.</li>
                <li>Hệ thống hiển thị cài đặt hiện tại.</li>
                <li>User chọn loại thông báo cần nhận (mentions, updates, invites...).</li>
                <li>User chọn kênh nhận (in-app, email, push notification).</li>
                <li>User nhấn "Lưu".</li>
                <li>Hệ thống cập nhật preferences.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Preferences thông báo được lưu và áp dụng.
        </td>
    </tr>
</table>

<!-- UC05.3 -->
<p class="table-caption">Bảng 5.3. Bảng đặc tả chức năng Đánh dấu đã đọc</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Đánh dấu đã đọc</td>
        <td style="width: 30%;">ID: UC05.3</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: User</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Thấp</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn quản lý trạng thái đọc của thông báo.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép user đánh dấu một hoặc nhiều thông báo là đã đọc.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User chọn "Đánh dấu đã đọc" cho thông báo.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User chọn thông báo hoặc "Đánh dấu tất cả đã đọc".</li>
                <li>User nhấn "Đánh dấu đã đọc".</li>
                <li>Hệ thống cập nhật trạng thái thông báo.</li>
                <li>Hệ thống cập nhật badge số thông báo chưa đọc.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Thông báo được đánh dấu đã đọc và badge được cập nhật.
        </td>
    </tr>
</table>

<!-- ==================== UC06: XEM BÁO CÁO AI TỔNG HỢP ==================== -->

<h2 class="page-break">UC06: XEM BÁO CÁO AI TỔNG HỢP</h2>

<!-- UC06.1 -->
<p class="table-caption">Bảng 6.1. Bảng đặc tả chức năng Xem báo cáo tổng hợp</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xem báo cáo tổng hợp</td>
        <td style="width: 30%;">ID: UC06.1</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner, Member</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn xem báo cáo được AI tổng hợp từ các nguồn dữ liệu.</li>
                <li><strong>LLM Provider:</strong> Cung cấp khả năng phân tích và tổng hợp nội dung.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng hiển thị báo cáo được AI tổng hợp từ meetings, chats, và tệp tin.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User truy cập trang AI Reports.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User truy cập AI Reports.</li>
                <li>Hệ thống hiển thị danh sách báo cáo có sẵn (daily summary, weekly digest...).</li>
                <li>User chọn loại báo cáo.</li>
                <li>Hệ thống tổng hợp dữ liệu từ các nguồn (meetings, chats, files).</li>
                <li>Hệ thống gọi AI để phân tích và tóm tắt (Include UC06.4).</li>
                <li>Hệ thống hiển thị báo cáo với insights và action items.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include UC06.4 (Truy vấn LLM Provider).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Chưa cấu hình LLM Provider → Hiển thị hướng dẫn cấu hình.</li>
                <li>E2: LLM Provider không phản hồi → Hiển thị lỗi và cho phép thử lại.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> User xem được báo cáo AI tổng hợp với insights hữu ích.
        </td>
    </tr>
</table>

<!-- UC06.2 -->
<p class="table-caption">Bảng 6.2. Bảng đặc tả chức năng Tạo báo cáo tùy chỉnh</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Tạo báo cáo tùy chỉnh</td>
        <td style="width: 30%;">ID: UC06.2</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>Workspace Owner:</strong> Muốn tạo báo cáo AI theo yêu cầu cụ thể.</li>
                <li><strong>LLM Provider:</strong> Xử lý yêu cầu phân tích tùy chỉnh.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng cho phép Owner tạo báo cáo AI với prompt và nguồn dữ liệu tùy chỉnh.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Owner chọn "Tạo báo cáo mới" trong AI Reports.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Owner chọn "Tạo báo cáo mới".</li>
                <li>Hệ thống hiển thị wizard tạo báo cáo.</li>
                <li>Owner chọn nguồn dữ liệu (meetings, chats, files, integrations).</li>
                <li>Owner chọn khoảng thời gian.</li>
                <li>Owner nhập prompt/yêu cầu cụ thể.</li>
                <li>Owner nhấn "Tạo báo cáo".</li>
                <li>Hệ thống collect dữ liệu từ các nguồn đã chọn.</li>
                <li>Hệ thống gọi AI để phân tích (Include UC06.4).</li>
                <li>Hệ thống lưu và hiển thị báo cáo.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include UC06.4 (Truy vấn LLM Provider).
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: Không đủ dữ liệu → Hiển thị cảnh báo và đề xuất mở rộng phạm vi.</li>
                <li>E2: Prompt quá phức tạp → Đề xuất chia nhỏ yêu cầu.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Báo cáo tùy chỉnh được tạo và lưu để xem lại sau.
        </td>
    </tr>
</table>

<!-- UC06.3 -->
<p class="table-caption">Bảng 6.3. Bảng đặc tả chức năng Xuất báo cáo</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Xuất báo cáo</td>
        <td style="width: 30%;">ID: UC06.3</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: Workspace Owner, Member</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Trung bình</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>User:</strong> Muốn xuất báo cáo sang định dạng khác để chia sẻ hoặc lưu trữ.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng export báo cáo AI sang các định dạng phổ biến.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> User chọn "Xuất báo cáo" cho một báo cáo đã tạo.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> External.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>User chọn "Xuất báo cáo".</li>
                <li>Hệ thống hiển thị options định dạng (PDF, DOCX, MD, HTML).</li>
                <li>User chọn định dạng mong muốn.</li>
                <li>User nhấn "Xuất".</li>
                <li>Hệ thống render báo cáo theo định dạng.</li>
                <li>Hệ thống tạo file và trigger download.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> N/A
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>A1: Chia sẻ qua email → Gửi báo cáo trực tiếp đến email được chỉ định.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Báo cáo được xuất và download về máy user.
        </td>
    </tr>
</table>

<!-- UC06.4 -->
<p class="table-caption">Bảng 6.4. Bảng đặc tả chức năng Truy vấn LLM Provider</p>
<table class="uc-table">
    <tr class="header-row">
        <td style="width: 70%;">Tên chức năng: Truy vấn LLM Provider</td>
        <td style="width: 30%;">ID: UC06.4</td>
    </tr>
    <tr>
        <td rowspan="2">Người sử dụng: LLM Provider</td>
        <td>Mức độ cần thiết: Bắt buộc</td>
    </tr>
    <tr>
        <td>Phân loại: Cao</td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các thành phần tham gia và mối quan tâm:</span>
            <ul>
                <li><strong>System:</strong> Cần gửi request đến AI để phân tích dữ liệu.</li>
                <li><strong>LLM Provider:</strong> Xử lý request và trả về kết quả phân tích.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Mô tả tóm tắt:</span> Chức năng hệ thống giao tiếp với LLM Provider (OpenAI, Anthropic, Google) để xử lý AI.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Trigger:</span> Được gọi từ UC06.1, UC06.2.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kiểu sự kiện:</span> Internal.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng xử lý bình thường của sự kiện:</span>
            <ol>
                <li>Hệ thống chuẩn bị prompt với context data.</li>
                <li>Hệ thống gửi request đến LLM API (với API key từ config).</li>
                <li>LLM Provider xử lý request.</li>
                <li>LLM Provider trả về response.</li>
                <li>Hệ thống nhận và parse response.</li>
                <li>Hệ thống ghi log request để theo dõi.</li>
                <li>Hệ thống trả kết quả về UC gọi.</li>
            </ol>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Các luồng sự kiện con (Subflows):</span> Include bởi UC06.1, UC06.2.
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Luồng luân phiên/đặc biệt (Alternative/Exceptional flows):</span>
            <ul>
                <li>E1: API timeout → Retry với exponential backoff (tối đa 3 lần).</li>
                <li>E2: Rate limit exceeded → Queue request và retry sau.</li>
                <li>E3: Invalid API key → Thông báo Owner cấu hình lại.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <span class="label">Kết quả:</span> Hệ thống nhận được response từ AI để sử dụng trong báo cáo.
        </td>
    </tr>
</table>

<!-- ==================== PHỤ LỤC ==================== -->

<h2 class="page-break">PHỤ LỤC</h2>

<h3>A. Bảng tổng hợp Use Case</h3>

<table class="actor-table">
    <tr>
        <th>Package</th>
        <th>Mã UC</th>
        <th>Tên Use Case</th>
        <th>Actor chính</th>
        <th>Mức độ</th>
    </tr>
    <tr>
        <td rowspan="7">UC01: Quản lý Tài khoản</td>
        <td>UC01.1</td>
        <td>Đăng ký</td>
        <td>User</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC01.2</td>
        <td>Đăng nhập</td>
        <td>User</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC01.3</td>
        <td>Đăng xuất</td>
        <td>User</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC01.4</td>
        <td>Cập nhật thông tin</td>
        <td>User</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC01.5</td>
        <td>Đổi mật khẩu</td>
        <td>User</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC01.6</td>
        <td>Quên mật khẩu</td>
        <td>User</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC01.7</td>
        <td>Xác thực tài khoản</td>
        <td>User</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td rowspan="7">UC02: Quản lý Workspace</td>
        <td>UC02.1</td>
        <td>Tạo workspace</td>
        <td>Workspace Owner</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC02.2</td>
        <td>Cấu hình workspace</td>
        <td>Workspace Owner</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC02.3</td>
        <td>Xem danh sách workspace</td>
        <td>All Users</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC02.4</td>
        <td>Khóa workspace</td>
        <td>Super Admin</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC02.5</td>
        <td>Mở khóa workspace</td>
        <td>Super Admin</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC02.6</td>
        <td>Xem dashboard</td>
        <td>Workspace Owner</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC02.7</td>
        <td>Xem audit log</td>
        <td>Workspace Owner, Super Admin</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td rowspan="7">UC03: Quản lý Thành viên</td>
        <td>UC03.1</td>
        <td>Mời thành viên</td>
        <td>Workspace Owner</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC03.2</td>
        <td>Xóa thành viên</td>
        <td>Workspace Owner</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC03.3</td>
        <td>Phân quyền</td>
        <td>Workspace Owner</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC03.4</td>
        <td>Xem danh sách thành viên</td>
        <td>Workspace Owner, Member</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC03.5</td>
        <td>Gửi email mời</td>
        <td>System</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC03.6</td>
        <td>Cấp quyền Owner</td>
        <td>Workspace Owner</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC03.7</td>
        <td>Thu hồi quyền Owner</td>
        <td>Workspace Owner</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td rowspan="6">UC04: Quản lý Tệp tin</td>
        <td>UC04.1</td>
        <td>Upload tệp</td>
        <td>Workspace Owner, Member</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC04.2</td>
        <td>Xem danh sách tệp</td>
        <td>Workspace Owner, Member</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC04.3</td>
        <td>Tải tệp</td>
        <td>Workspace Owner, Member</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC04.4</td>
        <td>Xóa tệp</td>
        <td>Workspace Owner, Member</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC04.5</td>
        <td>Tìm kiếm tệp</td>
        <td>Workspace Owner, Member</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC04.6</td>
        <td>Kiểm tra quyền truy cập</td>
        <td>System</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td rowspan="3">UC05: Quản lý Thông báo</td>
        <td>UC05.1</td>
        <td>Xem thông báo</td>
        <td>User</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC05.2</td>
        <td>Cấu hình thông báo</td>
        <td>User</td>
        <td>Thấp</td>
    </tr>
    <tr>
        <td>UC05.3</td>
        <td>Đánh dấu đã đọc</td>
        <td>User</td>
        <td>Thấp</td>
    </tr>
    <tr>
        <td rowspan="4">UC06: Xem Báo cáo AI</td>
        <td>UC06.1</td>
        <td>Xem báo cáo tổng hợp</td>
        <td>Workspace Owner, Member</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC06.2</td>
        <td>Tạo báo cáo tùy chỉnh</td>
        <td>Workspace Owner</td>
        <td>Cao</td>
    </tr>
    <tr>
        <td>UC06.3</td>
        <td>Xuất báo cáo</td>
        <td>Workspace Owner, Member</td>
        <td>Trung bình</td>
    </tr>
    <tr>
        <td>UC06.4</td>
        <td>Truy vấn LLM Provider</td>
        <td>LLM Provider</td>
        <td>Cao</td>
    </tr>
</table>

<h3>B. Danh sách các mối quan hệ Use Case</h3>

<table class="actor-table">
    <tr>
        <th>Use Case</th>
        <th>Quan hệ</th>
        <th>Use Case liên quan</th>
    </tr>
    <tr>
        <td>UC01.1 (Đăng ký)</td>
        <td>Include</td>
        <td>UC01.7 (Xác thực tài khoản)</td>
    </tr>
    <tr>
        <td>UC01.2 (Đăng nhập)</td>
        <td>Include</td>
        <td>UC01.7 (Xác thực tài khoản)</td>
    </tr>
    <tr>
        <td>UC02.3 (Xem danh sách workspace)</td>
        <td>Extend</td>
        <td>UC02.4 (Khóa workspace)</td>
    </tr>
    <tr>
        <td>UC02.3 (Xem danh sách workspace)</td>
        <td>Extend</td>
        <td>UC02.5 (Mở khóa workspace)</td>
    </tr>
    <tr>
        <td>UC03.1 (Mời thành viên)</td>
        <td>Include</td>
        <td>UC03.5 (Gửi email mời)</td>
    </tr>
    <tr>
        <td>UC03.3 (Phân quyền)</td>
        <td>Extend</td>
        <td>UC03.6 (Cấp quyền Owner)</td>
    </tr>
    <tr>
        <td>UC03.3 (Phân quyền)</td>
        <td>Extend</td>
        <td>UC03.7 (Thu hồi quyền Owner)</td>
    </tr>
    <tr>
        <td>UC04.1 (Upload tệp)</td>
        <td>Include</td>
        <td>UC04.6 (Kiểm tra quyền truy cập)</td>
    </tr>
    <tr>
        <td>UC04.3 (Tải tệp)</td>
        <td>Include</td>
        <td>UC04.6 (Kiểm tra quyền truy cập)</td>
    </tr>
    <tr>
        <td>UC04.4 (Xóa tệp)</td>
        <td>Include</td>
        <td>UC04.6 (Kiểm tra quyền truy cập)</td>
    </tr>
    <tr>
        <td>UC06.1 (Xem báo cáo tổng hợp)</td>
        <td>Include</td>
        <td>UC06.4 (Truy vấn LLM Provider)</td>
    </tr>
    <tr>
        <td>UC06.2 (Tạo báo cáo tùy chỉnh)</td>
        <td>Include</td>
        <td>UC06.4 (Truy vấn LLM Provider)</td>
    </tr>
</table>

</body>
</html>
