% ==================== NHÓM BÁO CÁO AI ====================

\subsubsection{Chức năng xem báo cáo tổng hợp}

\textbf{Mục đích:} Cho phép thành viên xem danh sách và nội dung các báo cáo AI đã được tạo trong workspace.

\textbf{Dữ liệu được dùng:}

\begin{adjustwidth}{-1.5cm}{-0.5cm}
\begin{longtblr}[
  caption = {Bảng dữ liệu được dùng cho chức năng xem báo cáo tổng hợp},
  label = {tab:func_view_reports}
]{
  width=\linewidth, rowhead=2, hlines, vlines,
  colspec={X[0.5,c]X[2,l]X[1,c]X[1,c]X[1,c]X[1,c]},
  rows={m},
  row{1-2}={font=\bfseries, c, bg=gray9}
}
\SetCell[r=2]{} STT & \SetCell[r=2]{} Tên bảng & \SetCell[c=4]{} Phương thức & & & \\
& & Thêm & Sửa & Xóa & Truy vấn \\
1 & AIReport & & & & X \\
2 & Member & & & & X \\
\end{longtblr}
\end{adjustwidth}

\textbf{Xử lý:}

\begin{figure}[H]
\centering
\includegraphics[width=0.65\textwidth]{images/act_view_reports.png}
\caption{Sơ đồ hoạt động của chức năng xem báo cáo tổng hợp}
\label{fig:act_view_reports}
\end{figure}

\subsubsection{Chức năng tạo báo cáo tùy chỉnh}

\textbf{Mục đích:} Cho phép Owner hoặc Admin tạo báo cáo AI tùy chỉnh dựa trên prompt và dữ liệu workspace.

\textbf{Dữ liệu được dùng:}

\begin{adjustwidth}{-1.5cm}{-0.5cm}
\begin{longtblr}[
  caption = {Bảng dữ liệu được dùng cho chức năng tạo báo cáo tùy chỉnh},
  label = {tab:func_create_ai_report}
]{
  width=\linewidth, rowhead=2, hlines, vlines,
  colspec={X[0.5,c]X[2,l]X[1,c]X[1,c]X[1,c]X[1,c]},
  rows={m},
  row{1-2}={font=\bfseries, c, bg=gray9}
}
\SetCell[r=2]{} STT & \SetCell[r=2]{} Tên bảng & \SetCell[c=4]{} Phương thức & & & \\
& & Thêm & Sửa & Xóa & Truy vấn \\
1 & AIReport & X & & & \\
2 & File & & & & X \\
3 & AuditLog & & & & X \\
4 & Notification & X & & & \\
\end{longtblr}
\end{adjustwidth}

\textbf{Xử lý:}

\begin{figure}[H]
\centering
\includegraphics[width=0.65\textwidth]{images/act_create_ai_report.png}
\caption{Sơ đồ hoạt động của chức năng tạo báo cáo tùy chỉnh}
\label{fig:act_create_ai_report}
\end{figure}

\subsubsection{Chức năng truy vấn LLM Provider}

\textbf{Mục đích:} Hệ thống kết nối và gửi request đến các LLM Provider (OpenAI, Anthropic, Google) để tạo nội dung báo cáo.

\textbf{Dữ liệu được dùng:}

\begin{adjustwidth}{-1.5cm}{-0.5cm}
\begin{longtblr}[
  caption = {Bảng dữ liệu được dùng cho chức năng truy vấn LLM Provider},
  label = {tab:func_query_llm}
]{
  width=\linewidth, rowhead=2, hlines, vlines,
  colspec={X[0.5,c]X[2,l]X[1,c]X[1,c]X[1,c]X[1,c]},
  rows={m},
  row{1-2}={font=\bfseries, c, bg=gray9}
}
\SetCell[r=2]{} STT & \SetCell[r=2]{} Tên bảng & \SetCell[c=4]{} Phương thức & & & \\
& & Thêm & Sửa & Xóa & Truy vấn \\
1 & AIReport & & X & & X \\
2 & Workspace & & & & X \\
\end{longtblr}
\end{adjustwidth}

\textbf{Xử lý:}

\begin{figure}[H]
\centering
\includegraphics[width=0.65\textwidth]{images/act_query_llm.png}
\caption{Sơ đồ hoạt động của chức năng truy vấn LLM Provider}
\label{fig:act_query_llm}
\end{figure}
