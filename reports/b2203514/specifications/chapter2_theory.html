<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chương 2: Cơ sở lý thuyết - SaaS Platform</title>
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            font-size: 13pt;
            line-height: 1.5;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px;
            text-align: justify;
        }
        h1 {
            font-size: 16pt;
            font-weight: bold;
            text-align: center;
            margin-top: 30pt;
            margin-bottom: 20pt;
        }
        h2 {
            font-size: 14pt;
            font-weight: bold;
            margin-top: 24pt;
            margin-bottom: 12pt;
        }
        h3 {
            font-size: 13pt;
            font-weight: bold;
            font-style: italic;
            margin-top: 18pt;
            margin-bottom: 10pt;
        }
        h4 {
            font-size: 13pt;
            font-weight: bold;
            font-style: italic;
            margin-top: 14pt;
            margin-bottom: 8pt;
        }
        p {
            margin-bottom: 12pt;
            text-indent: 1.27cm;
        }
        p.no-indent {
            text-indent: 0;
        }
        ul, ol {
            margin-left: 20px;
            padding-left: 0;
            margin-bottom: 12pt;
        }
        li {
            margin-bottom: 8px;
        }
        ul ul {
            margin-top: 8px;
            list-style-type: circle;
        }
        .section-number {
            font-weight: bold;
        }
        .figure {
            text-align: center;
            margin: 20pt 0;
        }
        .figure-caption {
            font-style: italic;
            font-size: 12pt;
            margin-top: 8pt;
        }
        code {
            font-family: 'Courier New', monospace;
            background-color: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 11pt;
        }
        .code-block {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 10pt;
            overflow-x: auto;
            margin: 15pt 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15pt 0;
        }
        th, td {
            border: 1px solid #333;
            padding: 8px 12px;
            text-align: left;
        }
        th {
            background-color: #f0f0f0;
            font-weight: bold;
        }
    </style>
</head>
<body>

<h1>Chương 2: CƠ SỞ LÝ THUYẾT</h1>

<h2><span class="section-number">2.1.</span> Giới thiệu khái quát về mô hình SaaS</h2>

<h3><span class="section-number">2.1.1.</span> Khái quát về SaaS (Software as a Service)</h3>
<p>SaaS (Software as a Service - Phần mềm dưới dạng dịch vụ) là một mô hình phân phối phần mềm trong đó ứng dụng được lưu trữ trên cloud và cung cấp cho người dùng thông qua Internet. Thay vì cài đặt và bảo trì phần mềm trên máy tính cá nhân hoặc máy chủ riêng, người dùng có thể truy cập ứng dụng qua trình duyệt web.</p>

<p>SaaS là một trong ba mô hình chính của Cloud Computing, bên cạnh IaaS (Infrastructure as a Service) và PaaS (Platform as a Service). Trong mô hình SaaS, nhà cung cấp chịu trách nhiệm quản lý toàn bộ hạ tầng, bao gồm máy chủ, lưu trữ, mạng, và cả phần mềm ứng dụng.</p>

<h3><span class="section-number">2.1.2.</span> Đặc điểm của mô hình SaaS</h3>
<ul>
    <li><strong>Multi-tenancy (Đa thuê bao):</strong> Một instance của ứng dụng phục vụ nhiều khách hàng (tenants) khác nhau, với dữ liệu được phân tách logic hoặc vật lý.</li>
    <li><strong>Subscription-based pricing:</strong> Người dùng trả phí theo tháng hoặc năm thay vì mua license một lần.</li>
    <li><strong>Automatic updates:</strong> Nhà cung cấp tự động cập nhật và bảo trì phần mềm mà không cần sự can thiệp của người dùng.</li>
    <li><strong>Accessibility:</strong> Truy cập từ bất kỳ đâu có kết nối Internet thông qua trình duyệt web.</li>
    <li><strong>Scalability:</strong> Dễ dàng mở rộng hoặc thu hẹp tài nguyên theo nhu cầu sử dụng.</li>
</ul>

<h3><span class="section-number">2.1.3.</span> Ưu điểm của SaaS</h3>
<ul>
    <li><strong>Chi phí ban đầu thấp:</strong> Không cần đầu tư vào phần cứng, infrastructure hay license phần mềm đắt tiền.</li>
    <li><strong>Triển khai nhanh:</strong> Người dùng có thể bắt đầu sử dụng ngay sau khi đăng ký, không cần cài đặt phức tạp.</li>
    <li><strong>Bảo trì tự động:</strong> Nhà cung cấp chịu trách nhiệm bảo trì, cập nhật và sửa lỗi.</li>
    <li><strong>Khả năng mở rộng linh hoạt:</strong> Dễ dàng thêm người dùng hoặc tính năng khi cần.</li>
    <li><strong>Tích hợp dễ dàng:</strong> Hầu hết các ứng dụng SaaS cung cấp API để tích hợp với các hệ thống khác.</li>
</ul>

<h3><span class="section-number">2.1.4.</span> Vận dụng vào đề tài</h3>
<p>Trong đề tài này, hệ thống được xây dựng theo mô hình SaaS với các đặc điểm:</p>
<ul>
    <li>Kiến trúc Multi-tenant: Mỗi workspace là một tenant độc lập với dữ liệu được phân tách.</li>
    <li>Truy cập qua web: Người dùng truy cập hệ thống thông qua trình duyệt mà không cần cài đặt phần mềm.</li>
    <li>API-first design: Hệ thống cung cấp RESTful API để tích hợp với các dịch vụ bên ngoài như LLM Provider, Cloud Storage.</li>
    <li>Scalable architecture: Kiến trúc cho phép mở rộng horizontal khi số lượng người dùng tăng.</li>
</ul>

<h2><span class="section-number">2.2.</span> Giới thiệu về công nghệ Frontend</h2>

<h3><span class="section-number">2.2.1.</span> Khái quát về React.js</h3>
<p>React.js là một thư viện JavaScript mã nguồn mở được phát triển bởi Facebook (nay là Meta) vào năm 2013. React được sử dụng để xây dựng giao diện người dùng (UI) cho các ứng dụng web single-page (SPA) và mobile applications.</p>

<p>React sử dụng mô hình component-based, cho phép developers chia nhỏ giao diện thành các thành phần độc lập, tái sử dụng được. Mỗi component quản lý state riêng và có thể được kết hợp để tạo thành giao diện phức tạp.</p>

<h3><span class="section-number">2.2.2.</span> Các khái niệm cốt lõi trong React</h3>
<ul>
    <li><strong>JSX (JavaScript XML):</strong> Cú pháp mở rộng của JavaScript cho phép viết HTML trong JavaScript, giúp code dễ đọc và maintain hơn.</li>
    <li><strong>Virtual DOM:</strong> React sử dụng Virtual DOM để tối ưu hiệu suất. Khi state thay đổi, React so sánh Virtual DOM với DOM thật và chỉ cập nhật những phần thay đổi (reconciliation).</li>
    <li><strong>Components:</strong> Có hai loại component chính:
        <ul>
            <li>Functional Components: Sử dụng hooks để quản lý state và lifecycle.</li>
            <li>Class Components: Sử dụng class syntax với lifecycle methods (đã ít phổ biến).</li>
        </ul>
    </li>
    <li><strong>Props và State:</strong>
        <ul>
            <li>Props: Dữ liệu được truyền từ component cha xuống component con (immutable).</li>
            <li>State: Dữ liệu nội bộ của component, có thể thay đổi và trigger re-render.</li>
        </ul>
    </li>
    <li><strong>Hooks:</strong> Các hàm đặc biệt cho phép sử dụng state và các tính năng React trong functional components (useState, useEffect, useContext, useReducer, useMemo, useCallback...).</li>
</ul>

<h3><span class="section-number">2.2.3.</span> Giới thiệu về Next.js</h3>
<p>Next.js là một React framework được phát triển bởi Vercel, cung cấp các tính năng bổ sung như Server-Side Rendering (SSR), Static Site Generation (SSG), và nhiều tính năng tối ưu khác.</p>

<p>Các tính năng chính của Next.js:</p>
<ul>
    <li><strong>Server-Side Rendering (SSR):</strong> Render trang trên server trước khi gửi đến client, cải thiện SEO và thời gian tải trang đầu tiên.</li>
    <li><strong>Static Site Generation (SSG):</strong> Pre-render các trang tại build time, phù hợp cho nội dung ít thay đổi.</li>
    <li><strong>Incremental Static Regeneration (ISR):</strong> Kết hợp SSG với khả năng cập nhật trang sau khi deploy.</li>
    <li><strong>API Routes:</strong> Cho phép tạo API endpoints trực tiếp trong Next.js project.</li>
    <li><strong>File-based Routing:</strong> Tự động tạo routes dựa trên cấu trúc thư mục trong folder pages hoặc app.</li>
    <li><strong>Image Optimization:</strong> Component Image tự động tối ưu hình ảnh.</li>
    <li><strong>Built-in CSS Support:</strong> Hỗ trợ CSS Modules, Sass, Tailwind CSS.</li>
</ul>

<h3><span class="section-number">2.2.4.</span> Giới thiệu về TypeScript</h3>
<p>TypeScript là một ngôn ngữ lập trình được phát triển bởi Microsoft, là superset của JavaScript với hệ thống type checking tĩnh. TypeScript được biên dịch thành JavaScript thuần để chạy trên các môi trường JavaScript.</p>

<p>Ưu điểm của TypeScript:</p>
<ul>
    <li><strong>Type Safety:</strong> Phát hiện lỗi tại compile-time thay vì runtime, giảm bugs trong production.</li>
    <li><strong>Better IDE Support:</strong> IntelliSense, autocompletion, và refactoring tools mạnh mẽ hơn.</li>
    <li><strong>Self-documenting Code:</strong> Type annotations giúp code tự document, dễ hiểu hơn cho team.</li>
    <li><strong>Modern JavaScript Features:</strong> Hỗ trợ các tính năng ES6+ và biên dịch xuống các phiên bản JavaScript cũ hơn.</li>
</ul>

<h3><span class="section-number">2.2.5.</span> Vận dụng vào đề tài</h3>
<p>Trong đề tài này, Frontend được xây dựng bằng Next.js với TypeScript, kết hợp các công nghệ:</p>
<ul>
    <li><strong>Next.js 14 (App Router):</strong> Sử dụng cho routing, SSR, và API routes.</li>
    <li><strong>TypeScript:</strong> Đảm bảo type safety cho toàn bộ codebase.</li>
    <li><strong>Tailwind CSS:</strong> Utility-first CSS framework cho styling nhanh và responsive.</li>
    <li><strong>React Query (TanStack Query):</strong> Quản lý server state, caching, và data fetching.</li>
    <li><strong>Zustand:</strong> State management nhẹ và đơn giản cho client state.</li>
    <li><strong>React Hook Form:</strong> Xử lý form với validation.</li>
    <li><strong>Shadcn/ui:</strong> Component library dựa trên Radix UI.</li>
</ul>

<h2><span class="section-number">2.3.</span> Giới thiệu về công nghệ Backend</h2>

<h3><span class="section-number">2.3.1.</span> Khái quát về kiến trúc Microservices</h3>
<p>Hệ thống được xây dựng theo kiến trúc Microservices, trong đó mỗi service chịu trách nhiệm cho một bounded context cụ thể. Các services giao tiếp với nhau thông qua REST APIs hoặc message queues.</p>

<p>Ưu điểm của Microservices:</p>
<ul>
    <li><strong>Independent Deployment:</strong> Mỗi service có thể deploy độc lập.</li>
    <li><strong>Technology Flexibility:</strong> Mỗi service có thể sử dụng tech stack phù hợp nhất.</li>
    <li><strong>Scalability:</strong> Scale từng service riêng biệt theo nhu cầu.</li>
    <li><strong>Fault Isolation:</strong> Lỗi ở một service không ảnh hưởng đến services khác.</li>
</ul>

<h3><span class="section-number">2.3.2.</span> Giới thiệu về Spring Boot (Account Service)</h3>
<p>Spring Boot là một extension của Spring Framework giúp đơn giản hóa việc tạo và cấu hình ứng dụng Spring. Account Service được xây dựng bằng Spring Boot do yêu cầu bảo mật cao và tích hợp OAuth 2.0.</p>

<p><strong>Các tính năng của Spring Boot:</strong></p>
<ul>
    <li><strong>Auto-configuration:</strong> Tự động cấu hình ứng dụng dựa trên dependencies trong classpath.</li>
    <li><strong>Embedded Servers:</strong> Tích hợp sẵn Tomcat, không cần deploy WAR files.</li>
    <li><strong>Starter Dependencies:</strong> Các dependency packages được đóng gói sẵn (spring-boot-starter-web, spring-boot-starter-security...).</li>
    <li><strong>Production-ready Features:</strong> Health checks, metrics, externalized configuration.</li>
</ul>

<p><strong>Các thành phần Spring được sử dụng:</strong></p>
<ul>
    <li><strong>Spring Security:</strong> Framework bảo mật toàn diện cho authentication và authorization.
        <ul>
            <li>JWT authentication với access token và refresh token.</li>
            <li>OAuth 2.0 Client cho Google login.</li>
            <li>Password encoding với BCrypt.</li>
        </ul>
    </li>
    <li><strong>Spring Data JPA:</strong> Data access layer với PostgreSQL.
        <ul>
            <li>Repository pattern với JpaRepository interface.</li>
            <li>Query methods tự động generate từ method names.</li>
        </ul>
    </li>
    <li><strong>Spring MVC:</strong> RESTful API với @RestController.</li>
</ul>

<h3><span class="section-number">2.3.3.</span> Giới thiệu về NestJS (Other Services)</h3>
<p>NestJS là một framework Node.js tiên tiến để xây dựng các ứng dụng server-side hiệu quả và có khả năng mở rộng. NestJS được sử dụng cho các services còn lại do khả năng phát triển nhanh và hệ sinh thái JavaScript phong phú.</p>

<p>Các tính năng chính của NestJS:</p>
<ul>
    <li><strong>Modular Architecture:</strong> Tổ chức code thành các modules độc lập, dễ maintain và test.</li>
    <li><strong>Dependency Injection:</strong> Built-in DI container giúp quản lý dependencies hiệu quả.</li>
    <li><strong>Decorators:</strong> Sử dụng decorators để định nghĩa routes, middleware, guards, interceptors.</li>
    <li><strong>TypeScript Native:</strong> Hỗ trợ TypeScript out-of-the-box với type safety.</li>
    <li><strong>Built-in Support:</strong> Hỗ trợ sẵn cho TypeORM/Prisma, WebSockets, microservices.</li>
</ul>

<p><strong>Kiến trúc của NestJS:</strong></p>
<ul>
    <li><strong>Controllers:</strong> Xử lý incoming requests và trả về responses.</li>
    <li><strong>Services (Providers):</strong> Chứa business logic, được inject vào controllers thông qua DI.</li>
    <li><strong>Modules:</strong> Tổ chức và đóng gói các components liên quan.</li>
    <li><strong>Guards:</strong> Xử lý authentication và authorization.</li>
    <li><strong>Interceptors:</strong> Transform data trước/sau khi xử lý request.</li>
    <li><strong>Pipes:</strong> Validation và transformation của input data.</li>
</ul>

<h3><span class="section-number">2.3.4.</span> RESTful API Design</h3>
<p>REST (Representational State Transfer) là một kiến trúc thiết kế API sử dụng các HTTP methods để thực hiện CRUD operations trên resources.</p>

<p>Các nguyên tắc của RESTful API:</p>
<ul>
    <li><strong>Resource-based URLs:</strong> URL đại diện cho resources (nouns), không phải actions (verbs).</li>
    <li><strong>HTTP Methods:</strong>
        <ul>
            <li>GET: Lấy dữ liệu</li>
            <li>POST: Tạo mới resource</li>
            <li>PUT/PATCH: Cập nhật resource</li>
            <li>DELETE: Xóa resource</li>
        </ul>
    </li>
    <li><strong>Stateless:</strong> Mỗi request chứa đầy đủ thông tin cần thiết, server không lưu client state.</li>
    <li><strong>HTTP Status Codes:</strong> Sử dụng status codes phù hợp (200, 201, 400, 401, 403, 404, 500...).</li>
    <li><strong>Versioning:</strong> API được version hóa (v1, v2) để maintain backward compatibility.</li>
</ul>

<h3><span class="section-number">2.3.5.</span> Vận dụng vào đề tài</h3>
<p>Backend của hệ thống được xây dựng theo kiến trúc Microservices:</p>

<p><strong>Account Service (Spring Boot):</strong></p>
<ul>
    <li>Chịu trách nhiệm: Authentication, Authorization, User Management.</li>
    <li>Tech stack: Spring Boot 3.x, Spring Security, Spring Data JPA.</li>
    <li>Features:
        <ul>
            <li>JWT authentication (access token + refresh token).</li>
            <li>Google OAuth 2.0 integration.</li>
            <li>User CRUD operations.</li>
            <li>Password reset, email verification.</li>
            <li>Session management.</li>
        </ul>
    </li>
</ul>

<p><strong>Other Services (NestJS):</strong></p>
<ul>
    <li><strong>Workspace Service:</strong> Quản lý workspaces, cấu hình, dashboard.</li>
    <li><strong>Member Service:</strong> Quản lý members, invitations, permissions.</li>
    <li><strong>File Service:</strong> Upload, download, quản lý files với MinIO/S3.</li>
    <li><strong>Notification Service:</strong> Real-time notifications, email notifications.</li>
    <li><strong>Report Service:</strong> AI report generation, LLM integration.</li>
</ul>

<p><strong>Common Features:</strong></p>
<ul>
    <li>RESTful API với documentation bằng Swagger/OpenAPI.</li>
    <li>Validation với class-validator (NestJS) và Bean Validation (Spring).</li>
    <li>Error handling với global exception handlers.</li>
    <li>Logging và monitoring.</li>
</ul>

<h2><span class="section-number">2.4.</span> Giới thiệu về cơ sở dữ liệu</h2>

<h3><span class="section-number">2.4.1.</span> Khái quát về PostgreSQL</h3>
<p>PostgreSQL là một hệ quản trị cơ sở dữ liệu quan hệ (RDBMS) mã nguồn mở mạnh mẽ với hơn 35 năm phát triển. PostgreSQL nổi tiếng với độ tin cậy, tính toàn vẹn dữ liệu, và bộ tính năng phong phú.</p>

<p>Đặc điểm nổi bật của PostgreSQL:</p>
<ul>
    <li><strong>ACID Compliance:</strong> Đảm bảo Atomicity, Consistency, Isolation, Durability cho transactions.</li>
    <li><strong>Extensibility:</strong> Hỗ trợ custom functions, data types, operators, và extensions.</li>
    <li><strong>JSON/JSONB Support:</strong> Lưu trữ và query dữ liệu JSON hiệu quả, kết hợp ưu điểm của SQL và NoSQL.</li>
    <li><strong>Full-text Search:</strong> Built-in full-text search capabilities.</li>
    <li><strong>Advanced Indexing:</strong> Hỗ trợ B-tree, Hash, GiST, SP-GiST, GIN, BRIN indexes.</li>
    <li><strong>Concurrency Control:</strong> MVCC (Multi-Version Concurrency Control) cho phép đọc và ghi đồng thời.</li>
</ul>

<h3><span class="section-number">2.4.2.</span> Giới thiệu về Redis</h3>
<p>Redis (Remote Dictionary Server) là một in-memory data structure store, được sử dụng như database, cache, và message broker. Redis lưu trữ dữ liệu trong RAM, cho phép đọc/ghi cực nhanh với latency dưới millisecond.</p>

<p>Các data structures của Redis:</p>
<ul>
    <li><strong>Strings:</strong> Kiểu dữ liệu cơ bản, lưu text hoặc binary data.</li>
    <li><strong>Lists:</strong> Linked lists của strings.</li>
    <li><strong>Sets:</strong> Unordered collections of unique strings.</li>
    <li><strong>Sorted Sets:</strong> Sets với score để sắp xếp.</li>
    <li><strong>Hashes:</strong> Maps của field-value pairs.</li>
    <li><strong>Streams:</strong> Append-only log data structure.</li>
</ul>

<p>Use cases của Redis trong ứng dụng web:</p>
<ul>
    <li>Session storage</li>
    <li>Caching (database query results, API responses)</li>
    <li>Rate limiting</li>
    <li>Real-time leaderboards</li>
    <li>Pub/Sub messaging</li>
    <li>Job queues</li>
</ul>

<h3><span class="section-number">2.4.3.</span> Giới thiệu về ORM (Object-Relational Mapping)</h3>

<p><strong>Spring Data JPA + Hibernate (Account Service):</strong></p>
<p>JPA (Java Persistence API) là specification cho ORM trong Java. Hibernate là implementation phổ biến nhất của JPA.</p>
<ul>
    <li><strong>Entity:</strong> Java class được annotate với @Entity, map với database table.</li>
    <li><strong>Repository Interface:</strong> Extends JpaRepository, Spring tự động implement.</li>
    <li><strong>Query Methods:</strong> Tự động generate queries từ method names.</li>
    <li><strong>@Query Annotation:</strong> Custom JPQL hoặc native SQL queries.</li>
</ul>

<p><strong>Prisma ORM (NestJS Services):</strong></p>
<p>Prisma là một modern ORM cho Node.js và TypeScript với type-safe database client.</p>
<ul>
    <li><strong>Prisma Schema:</strong> File định nghĩa data models và database connection.</li>
    <li><strong>Prisma Client:</strong> Auto-generated, type-safe database client.</li>
    <li><strong>Prisma Migrate:</strong> Database migration tool.</li>
    <li><strong>Prisma Studio:</strong> GUI để browse và edit data.</li>
    <li><strong>Type Safety:</strong> Full TypeScript support với generated types.</li>
</ul>

<h3><span class="section-number">2.4.4.</span> Vận dụng vào đề tài</h3>
<p>Hệ thống sử dụng kết hợp PostgreSQL và Redis:</p>
<ul>
    <li><strong>PostgreSQL:</strong> Lưu trữ chính cho users, workspaces, members, files, permissions, audit logs.</li>
    <li><strong>Redis:</strong>
        <ul>
            <li>Session storage cho user authentication</li>
            <li>Caching cho frequently accessed data</li>
            <li>Rate limiting cho API requests</li>
            <li>Real-time notifications với Pub/Sub</li>
        </ul>
    </li>
    <li><strong>ORM Layer:</strong>
        <ul>
            <li>Account Service (Spring Boot): Spring Data JPA + Hibernate với Flyway migrations.</li>
            <li>Other Services (NestJS): Prisma ORM với Prisma Migrate.</li>
        </ul>
    </li>
</ul>

<h2><span class="section-number">2.5.</span> Giới thiệu về Large Language Models (LLM)</h2>

<h3><span class="section-number">2.5.1.</span> Khái quát về LLM</h3>
<p>Large Language Models (LLM) là các mô hình AI được train trên lượng lớn text data, có khả năng hiểu và sinh ra ngôn ngữ tự nhiên. LLMs sử dụng kiến trúc Transformer với hàng tỷ parameters để học patterns trong ngôn ngữ.</p>

<p>Đặc điểm của LLMs:</p>
<ul>
    <li><strong>Generative:</strong> Có khả năng sinh ra text mới, không chỉ phân loại hoặc trích xuất.</li>
    <li><strong>Few-shot/Zero-shot Learning:</strong> Có thể thực hiện tasks mới với ít hoặc không có examples.</li>
    <li><strong>Context Understanding:</strong> Hiểu context và ngữ cảnh của đoạn hội thoại.</li>
    <li><strong>Multi-task:</strong> Một model có thể thực hiện nhiều tasks khác nhau (summarization, translation, Q&A, coding...).</li>
</ul>

<h3><span class="section-number">2.5.2.</span> Các LLM Provider phổ biến</h3>

<p><strong>OpenAI GPT-4:</strong></p>
<ul>
    <li>Model mạnh mẽ nhất của OpenAI với khả năng reasoning và creative tasks.</li>
    <li>Hỗ trợ 128K token context window.</li>
    <li>Có phiên bản GPT-4 Turbo với giá rẻ hơn và GPT-4 Vision hỗ trợ image input.</li>
</ul>

<p><strong>Anthropic Claude:</strong></p>
<ul>
    <li>Được thiết kế với focus vào safety và helpfulness.</li>
    <li>Claude 3 có context window lên đến 200K tokens.</li>
    <li>Có các phiên bản: Opus (mạnh nhất), Sonnet (cân bằng), Haiku (nhanh và rẻ).</li>
</ul>

<p><strong>Google Gemini:</strong></p>
<ul>
    <li>Model multimodal có thể xử lý text, images, audio, video.</li>
    <li>Tích hợp sâu với Google ecosystem.</li>
    <li>Có các phiên bản: Ultra, Pro, Nano.</li>
</ul>

<h3><span class="section-number">2.5.3.</span> Prompt Engineering</h3>
<p>Prompt Engineering là nghệ thuật và khoa học của việc thiết kế prompts hiệu quả để có được kết quả mong muốn từ LLMs.</p>

<p>Các kỹ thuật Prompt Engineering:</p>
<ul>
    <li><strong>Zero-shot Prompting:</strong> Yêu cầu model thực hiện task mà không có examples.</li>
    <li><strong>Few-shot Prompting:</strong> Cung cấp một vài examples trước khi đưa ra task chính.</li>
    <li><strong>Chain-of-Thought (CoT):</strong> Yêu cầu model giải thích reasoning từng bước.</li>
    <li><strong>System Prompts:</strong> Định nghĩa persona và constraints cho model.</li>
    <li><strong>Structured Output:</strong> Yêu cầu model trả về format cụ thể (JSON, XML...).</li>
</ul>

<h3><span class="section-number">2.5.4.</span> LangChain.js Framework</h3>
<p>LangChain.js là JavaScript/TypeScript implementation của LangChain framework, được thiết kế để tích hợp LLMs vào Node.js applications. LangChain.js cung cấp các abstractions và tools để:</p>
<ul>
    <li><strong>Chains:</strong> Kết hợp nhiều LLM calls hoặc tools theo sequence.</li>
    <li><strong>Agents:</strong> LLM quyết định tools nào cần sử dụng để hoàn thành task.</li>
    <li><strong>Memory:</strong> Lưu trữ conversation history cho context.</li>
    <li><strong>Structured Output:</strong> Extract structured data từ LLM responses với Zod schemas.</li>
    <li><strong>Multiple Providers:</strong> Support cho OpenAI, Anthropic, Google, và nhiều providers khác.</li>
    <li><strong>Streaming:</strong> Stream responses để cải thiện UX.</li>
</ul>

<h3><span class="section-number">2.5.5.</span> Vận dụng vào đề tài</h3>
<p>Report Service (NestJS) tích hợp LLM để tạo báo cáo AI tổng hợp:</p>
<ul>
    <li><strong>Multi-provider Support:</strong> Hỗ trợ OpenAI, Anthropic Claude, Google Gemini với khả năng switch provider thông qua configuration.</li>
    <li><strong>LangChain.js Integration:</strong> Sử dụng LangChain.js để:
        <ul>
            <li>Orchestrate LLM calls với chains.</li>
            <li>Quản lý conversation memory cho context-aware responses.</li>
            <li>Extract structured data từ LLM responses.</li>
        </ul>
    </li>
    <li><strong>Report Generation:</strong> Sử dụng LLM để tổng hợp dữ liệu từ meetings, chats, files thành báo cáo có insights.</li>
    <li><strong>Custom Prompts:</strong> Cho phép workspace owner tạo prompts tùy chỉnh cho các loại báo cáo khác nhau.</li>
    <li><strong>Structured Output:</strong> LLM trả về JSON format để hiển thị báo cáo có cấu trúc.</li>
    <li><strong>Streaming:</strong> Hỗ trợ streaming response để cải thiện UX khi generate báo cáo dài.</li>
</ul>

<h2><span class="section-number">2.6.</span> Giới thiệu về Authentication và Authorization</h2>

<h3><span class="section-number">2.6.1.</span> Khái quát về Authentication</h3>
<p>Authentication (Xác thực) là quá trình xác minh danh tính của user. Trong web applications, authentication thường được thực hiện qua:</p>
<ul>
    <li><strong>Credentials-based:</strong> Username/email và password.</li>
    <li><strong>Token-based:</strong> JWT, API keys.</li>
    <li><strong>OAuth/SSO:</strong> Đăng nhập thông qua third-party providers (Google, Facebook, GitHub...).</li>
    <li><strong>Multi-factor Authentication (MFA):</strong> Kết hợp nhiều phương thức xác thực.</li>
</ul>

<h3><span class="section-number">2.6.2.</span> JSON Web Token (JWT)</h3>
<p>JWT là một tiêu chuẩn mở (RFC 7519) để truyền thông tin an toàn giữa các parties dưới dạng JSON object. JWT được sign bằng secret key (HMAC) hoặc public/private key pair (RSA, ECDSA).</p>

<p>Cấu trúc của JWT gồm 3 phần:</p>
<ul>
    <li><strong>Header:</strong> Chứa loại token và thuật toán signing.</li>
    <li><strong>Payload:</strong> Chứa claims (statements về user và metadata).</li>
    <li><strong>Signature:</strong> Được tạo bằng cách sign header + payload với secret key.</li>
</ul>

<p>Ưu điểm của JWT:</p>
<ul>
    <li><strong>Stateless:</strong> Server không cần lưu session, mọi thông tin cần thiết nằm trong token.</li>
    <li><strong>Scalable:</strong> Dễ dàng scale horizontal vì không cần shared session store.</li>
    <li><strong>Cross-domain:</strong> Token có thể được sử dụng across multiple domains.</li>
    <li><strong>Mobile-friendly:</strong> Phù hợp cho mobile apps và SPAs.</li>
</ul>

<h3><span class="section-number">2.6.3.</span> OAuth 2.0 và OpenID Connect</h3>
<p>OAuth 2.0 là một authorization framework cho phép third-party applications truy cập resources của user mà không cần share credentials. OpenID Connect (OIDC) là một identity layer được xây dựng trên OAuth 2.0.</p>

<p>OAuth 2.0 Authorization Code Flow:</p>
<ol>
    <li>User click "Login with Google".</li>
    <li>Application redirect user đến Google Authorization Server.</li>
    <li>User đăng nhập và grant permissions.</li>
    <li>Google redirect về application với authorization code.</li>
    <li>Application exchange code lấy access token và ID token.</li>
    <li>Application sử dụng tokens để authenticate user.</li>
</ol>

<h3><span class="section-number">2.6.4.</span> Authorization và RBAC</h3>
<p>Authorization (Phân quyền) là quá trình xác định user có quyền thực hiện một action hay truy cập một resource không.</p>

<p>RBAC (Role-Based Access Control) là mô hình phân quyền dựa trên roles:</p>
<ul>
    <li><strong>Users:</strong> Các cá nhân sử dụng hệ thống.</li>
    <li><strong>Roles:</strong> Tập hợp các permissions (Super Admin, Workspace Owner, Member).</li>
    <li><strong>Permissions:</strong> Quyền thực hiện các actions cụ thể (create, read, update, delete).</li>
    <li><strong>Resources:</strong> Đối tượng cần bảo vệ (workspaces, files, members).</li>
</ul>

<h3><span class="section-number">2.6.5.</span> Vận dụng vào đề tài</h3>
<p>Hệ thống authentication và authorization:</p>
<ul>
    <li><strong>JWT Authentication:</strong>
        <ul>
            <li>Access Token: Thời hạn ngắn (15 phút), dùng cho API requests.</li>
            <li>Refresh Token: Thời hạn dài (7 ngày), dùng để lấy access token mới.</li>
        </ul>
    </li>
    <li><strong>Google OAuth 2.0:</strong> Cho phép đăng nhập/đăng ký bằng Google account với xử lý conflict khi email đã tồn tại.</li>
    <li><strong>RBAC với 3 roles chính:</strong>
        <ul>
            <li>Super Admin: Quản lý toàn hệ thống, khóa/mở khóa workspaces.</li>
            <li>Workspace Owner: Toàn quyền trong workspace của mình.</li>
            <li>Member: Quyền hạn tùy theo permissions được gán.</li>
        </ul>
    </li>
    <li><strong>Password Security:</strong> Bcrypt với salt factor 12 cho password hashing.</li>
</ul>

<h2><span class="section-number">2.7.</span> Giới thiệu về Object Storage</h2>

<h3><span class="section-number">2.7.1.</span> Khái quát về Object Storage</h3>
<p>Object Storage là phương thức lưu trữ dữ liệu dưới dạng objects, mỗi object bao gồm data, metadata, và unique identifier. Object Storage phù hợp cho việc lưu trữ unstructured data như images, videos, documents, backups.</p>

<p>Đặc điểm của Object Storage:</p>
<ul>
    <li><strong>Flat Structure:</strong> Không có hierarchical directory structure như file systems.</li>
    <li><strong>Metadata:</strong> Mỗi object có thể có custom metadata.</li>
    <li><strong>Scalability:</strong> Dễ dàng scale lên petabytes data.</li>
    <li><strong>HTTP Access:</strong> Truy cập qua REST APIs.</li>
    <li><strong>Durability:</strong> Data được replicate across multiple nodes/locations.</li>
</ul>

<h3><span class="section-number">2.7.2.</span> Amazon S3 (Simple Storage Service)</h3>
<p>Amazon S3 là dịch vụ object storage của AWS với độ bền (durability) 99.999999999% (11 9's). S3 được thiết kế để lưu trữ và truy xuất bất kỳ lượng data nào từ bất kỳ đâu.</p>

<p>Các tính năng chính của S3:</p>
<ul>
    <li><strong>Buckets:</strong> Containers để lưu trữ objects.</li>
    <li><strong>Objects:</strong> Files được lưu trữ, mỗi object có unique key.</li>
    <li><strong>Storage Classes:</strong> Standard, Intelligent-Tiering, Glacier cho different access patterns.</li>
    <li><strong>Versioning:</strong> Lưu trữ multiple versions của một object.</li>
    <li><strong>Access Control:</strong> IAM policies, bucket policies, ACLs.</li>
    <li><strong>Pre-signed URLs:</strong> Temporary URLs để upload/download objects với time-limited access.</li>
    <li><strong>Event Notifications:</strong> Trigger Lambda functions khi có changes.</li>
</ul>

<h3><span class="section-number">2.7.3.</span> MinIO</h3>
<p>MinIO là một high-performance, S3-compatible object storage được thiết kế cho cloud-native workloads. MinIO có thể chạy on-premises hoặc trên cloud, phù hợp cho môi trường development và private cloud.</p>

<p>Đặc điểm của MinIO:</p>
<ul>
    <li><strong>S3 Compatible:</strong> API 100% compatible với Amazon S3, cho phép sử dụng các S3 SDKs và tools.</li>
    <li><strong>High Performance:</strong> Thiết kế để đạt throughput cao với hardware commodity.</li>
    <li><strong>Lightweight:</strong> Single binary, dễ dàng deploy với Docker.</li>
    <li><strong>Open Source:</strong> Apache License 2.0, có thể self-host miễn phí.</li>
    <li><strong>Kubernetes Native:</strong> Tích hợp tốt với Kubernetes qua MinIO Operator.</li>
    <li><strong>Console UI:</strong> Web-based management interface.</li>
</ul>

<p>Use cases của MinIO:</p>
<ul>
    <li><strong>Development Environment:</strong> Local S3-compatible storage cho development và testing.</li>
    <li><strong>Private Cloud:</strong> On-premises object storage cho enterprises.</li>
    <li><strong>CI/CD:</strong> Artifact storage trong CI/CD pipelines.</li>
    <li><strong>Data Lakes:</strong> Storage layer cho analytics workloads.</li>
</ul>

<h3><span class="section-number">2.7.4.</span> Vận dụng vào đề tài</h3>
<p>Hệ thống quản lý files sử dụng:</p>
<ul>
    <li><strong>Development Environment:</strong>
        <ul>
            <li>MinIO chạy trong Docker container.</li>
            <li>S3-compatible API cho seamless transition sang production.</li>
            <li>MinIO Console để quản lý và debug.</li>
        </ul>
    </li>
    <li><strong>Production Environment:</strong>
        <ul>
            <li>AWS S3 cho high durability và availability.</li>
            <li>Cùng codebase với dev nhờ S3-compatible API.</li>
            <li>Lifecycle policies để manage storage costs.</li>
        </ul>
    </li>
    <li><strong>Common Features:</strong>
        <ul>
            <li>Pre-signed URLs: Upload trực tiếp từ client, download với temporary URLs.</li>
            <li>Bucket per workspace: Data isolation giữa các workspaces.</li>
            <li>File Processing: Generate thumbnails với image processing libraries.</li>
            <li>Soft Delete: Files được move vào trash, xóa vĩnh viễn sau 30 ngày.</li>
        </ul>
    </li>
</ul>

<h2><span class="section-number">2.8.</span> Giới thiệu về WebSocket và Real-time Communication</h2>

<h3><span class="section-number">2.8.1.</span> Khái quát về WebSocket</h3>
<p>WebSocket là một protocol cung cấp full-duplex communication channels qua một TCP connection. Không giống như HTTP (request-response), WebSocket cho phép server push data đến client bất kỳ lúc nào.</p>

<p>Đặc điểm của WebSocket:</p>
<ul>
    <li><strong>Persistent Connection:</strong> Connection được giữ mở, không cần reconnect cho mỗi message.</li>
    <li><strong>Bi-directional:</strong> Cả client và server đều có thể gửi messages.</li>
    <li><strong>Low Latency:</strong> Không có HTTP overhead, messages được gửi ngay lập tức.</li>
    <li><strong>Protocol:</strong> ws:// (không mã hóa) hoặc wss:// (TLS encrypted).</li>
</ul>

<h3><span class="section-number">2.8.2.</span> Socket.io và NestJS WebSockets</h3>
<p>Socket.io là một library hỗ trợ real-time, bi-directional communication. NestJS cung cấp built-in support cho WebSockets với Socket.io adapter.</p>

<p><strong>Socket.io Features:</strong></p>
<ul>
    <li><strong>Automatic Reconnection:</strong> Tự động reconnect khi connection bị mất.</li>
    <li><strong>Rooms và Namespaces:</strong> Group connections cho broadcast có mục tiêu.</li>
    <li><strong>Acknowledgements:</strong> Callbacks để confirm message delivery.</li>
    <li><strong>Binary Support:</strong> Gửi binary data (images, files).</li>
    <li><strong>Fallback:</strong> Fallback sang HTTP long-polling khi WebSocket không available.</li>
</ul>

<p><strong>NestJS WebSocket Gateway:</strong></p>
<ul>
    <li><strong>@WebSocketGateway:</strong> Decorator để define WebSocket gateway.</li>
    <li><strong>@SubscribeMessage:</strong> Handle messages từ specific events.</li>
    <li><strong>@WebSocketServer:</strong> Inject Socket.io server instance.</li>
    <li><strong>Guards và Pipes:</strong> Reuse NestJS guards và pipes cho WebSocket.</li>
    <li><strong>Interceptors:</strong> Transform data before/after handling.</li>
</ul>

<h3><span class="section-number">2.8.3.</span> Vận dụng vào đề tài</h3>
<p>Notification Service (NestJS) sử dụng WebSocket cho:</p>
<ul>
    <li><strong>Real-time Notifications:</strong> Push notifications đến user ngay lập tức khi có events (new member, file upload, mention).</li>
    <li><strong>Rooms:</strong> Mỗi workspace là một room, broadcast events đến tất cả members.</li>
    <li><strong>User-specific Events:</strong> Gửi notifications đến specific users.</li>
    <li><strong>Dashboard Updates:</strong> Cập nhật dashboard metrics real-time.</li>
    <li><strong>Online Status:</strong> Track và broadcast trạng thái online/offline của members.</li>
    <li><strong>Authentication:</strong> Validate JWT token khi establish WebSocket connection.</li>
</ul>

<h2><span class="section-number">2.9.</span> Giới thiệu về Nginx</h2>

<h3><span class="section-number">2.9.1.</span> Khái quát về Nginx</h3>
<p>Nginx (đọc là "engine-x") là một web server mã nguồn mở hiệu suất cao, được phát triển bởi Igor Sysoev vào năm 2004. Ban đầu được thiết kế để giải quyết vấn đề C10K (xử lý 10,000 concurrent connections), Nginx đã trở thành một trong những web servers phổ biến nhất thế giới.</p>

<p>Nginx có thể hoạt động như:</p>
<ul>
    <li><strong>Web Server:</strong> Serve static files (HTML, CSS, JavaScript, images).</li>
    <li><strong>Reverse Proxy:</strong> Forward requests đến backend servers.</li>
    <li><strong>Load Balancer:</strong> Phân phối traffic across multiple servers.</li>
    <li><strong>HTTP Cache:</strong> Cache responses để giảm load trên backend.</li>
    <li><strong>SSL/TLS Termination:</strong> Xử lý HTTPS encryption/decryption.</li>
    <li><strong>API Gateway:</strong> Routing, rate limiting, authentication cho APIs.</li>
</ul>

<h3><span class="section-number">2.9.2.</span> Kiến trúc của Nginx</h3>
<p>Nginx sử dụng kiến trúc event-driven, asynchronous, và non-blocking:</p>
<ul>
    <li><strong>Master Process:</strong> Đọc configuration, bind ports, quản lý worker processes.</li>
    <li><strong>Worker Processes:</strong> Xử lý actual requests. Mỗi worker có thể handle hàng nghìn concurrent connections nhờ event-driven model.</li>
    <li><strong>Cache Loader/Manager:</strong> Quản lý cache data trên disk.</li>
</ul>

<p>Ưu điểm của kiến trúc này:</p>
<ul>
    <li><strong>High Concurrency:</strong> Xử lý hàng chục nghìn concurrent connections với minimal memory.</li>
    <li><strong>Low Memory Footprint:</strong> Mỗi connection chỉ cần vài KB memory.</li>
    <li><strong>High Performance:</strong> Event-driven model hiệu quả hơn thread-per-connection model.</li>
    <li><strong>Stability:</strong> Worker processes độc lập, một worker crash không ảnh hưởng đến workers khác.</li>
</ul>

<h3><span class="section-number">2.9.3.</span> Các tính năng chính của Nginx</h3>

<p><strong>Reverse Proxy:</strong></p>
<p>Nginx đứng trước backend servers, nhận requests từ clients và forward đến appropriate backend:</p>
<ul>
    <li>Ẩn backend infrastructure khỏi clients.</li>
    <li>SSL termination - decrypt HTTPS tại Nginx, forward HTTP đến backend.</li>
    <li>Request/response modification với headers.</li>
    <li>WebSocket proxying support.</li>
</ul>

<p><strong>Load Balancing:</strong></p>
<p>Nginx hỗ trợ nhiều load balancing algorithms:</p>
<ul>
    <li><strong>Round Robin:</strong> Phân phối requests tuần tự đến các servers (default).</li>
    <li><strong>Least Connections:</strong> Gửi request đến server có ít active connections nhất.</li>
    <li><strong>IP Hash:</strong> Route requests từ cùng một IP đến cùng một server (session persistence).</li>
    <li><strong>Weighted:</strong> Gán weights cho servers dựa trên capacity.</li>
    <li><strong>Health Checks:</strong> Tự động remove unhealthy servers khỏi pool.</li>
</ul>

<p><strong>Caching:</strong></p>
<ul>
    <li>Cache static content và API responses.</li>
    <li>Configurable cache expiration và invalidation.</li>
    <li>Proxy cache cho backend responses.</li>
    <li>FastCGI cache cho PHP/dynamic content.</li>
</ul>

<p><strong>Security Features:</strong></p>
<ul>
    <li><strong>SSL/TLS:</strong> Support cho TLS 1.2/1.3, HTTP/2, OCSP stapling.</li>
    <li><strong>Rate Limiting:</strong> Giới hạn requests per second/minute từ một IP.</li>
    <li><strong>Access Control:</strong> Allow/deny based on IP addresses.</li>
    <li><strong>Request Filtering:</strong> Block malicious requests dựa trên patterns.</li>
    <li><strong>DDoS Mitigation:</strong> Connection limits, request rate limits.</li>
</ul>

<h3><span class="section-number">2.9.4.</span> Cấu hình Nginx cơ bản</h3>
<p>Nginx sử dụng file configuration với cú pháp directive-based:</p>
<ul>
    <li><strong>Main Context:</strong> Global settings (worker_processes, error_log).</li>
    <li><strong>Events Context:</strong> Connection handling settings (worker_connections).</li>
    <li><strong>HTTP Context:</strong> HTTP server settings, upstream definitions.</li>
    <li><strong>Server Context:</strong> Virtual host configuration (listen, server_name).</li>
    <li><strong>Location Context:</strong> Request URI matching và handling.</li>
</ul>

<p>Ví dụ cấu hình reverse proxy:</p>
<div class="code-block">
server {
    listen 80;
    server_name example.com;
    
    location / {
        proxy_pass http://backend_servers;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /api {
        proxy_pass http://api_servers;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}

upstream backend_servers {
    least_conn;
    server backend1:8080 weight=3;
    server backend2:8080 weight=2;
    server backend3:8080 backup;
}
</div>

<h3><span class="section-number">2.9.5.</span> Vận dụng vào đề tài</h3>
<p>Nginx được sử dụng trong hệ thống với các vai trò:</p>
<ul>
    <li><strong>Reverse Proxy và API Gateway:</strong>
        <ul>
            <li>Route /api/auth/* đến Account Service (Spring Boot).</li>
            <li>Route /api/workspaces/*, /api/members/*, /api/files/*, /api/notifications/*, /api/reports/* đến các NestJS services tương ứng.</li>
            <li>Route / đến Frontend (Next.js).</li>
            <li>WebSocket proxy cho real-time notifications (/socket.io).</li>
            <li>SSL/TLS termination với Let's Encrypt certificates.</li>
        </ul>
    </li>
    <li><strong>Load Balancer:</strong>
        <ul>
            <li>Distribute traffic across multiple instances của mỗi service.</li>
            <li>Health checks để detect và remove failed servers.</li>
            <li>Sticky sessions cho WebSocket connections.</li>
        </ul>
    </li>
    <li><strong>Static File Serving:</strong>
        <ul>
            <li>Serve Next.js static assets với caching headers.</li>
            <li>Gzip compression cho text-based files.</li>
        </ul>
    </li>
    <li><strong>Security:</strong>
        <ul>
            <li>Rate limiting: 100 requests/minute cho API endpoints.</li>
            <li>Request size limits để prevent large file attacks.</li>
            <li>Security headers (X-Frame-Options, X-Content-Type-Options, CSP).</li>
            <li>CORS configuration cho API access.</li>
        </ul>
    </li>
</ul>

</body>
</html>
