\phantomsection
\subsection*{5. Quy trình nghiên cứu và Công nghệ sử dụng}
\addcontentsline{toc}{subsection}{5. Quy trình nghiên cứu và Công nghệ sử dụng}
\setcounter{subsection}{5}
\setcounter{subsubsection}{0}
\setcounter{figure}{0}

\subsubsection{Quy trình nghiên cứu}

\begin{itemize}
    \item Tìm hiểu lý thuyết về quản lý dự án theo phương pháp Agile, vai trò của giao tiếp hiệu quả trong các quy trình Agile và nhu cầu tập trung hóa các cuộc trao đổi, tài liệu đính kèm để hỗ trợ sự minh bạch thông tin và cộng tác liên chức năng.

    \item Khảo sát và phân tích một số nền tảng nhắn tin doanh nghiệp tiêu biểu như Slack, Microsoft Teams, Discord, Zulip,… để rút ra ưu điểm, hạn chế và xác định các tính năng cần thiết cho một hệ thống truyền thông tích hợp AI trong môi trường Agile.

    \item Xác định yêu cầu và mục tiêu cho phân hệ truyền thông: quản lý kênh trò chuyện theo dự án và workspace, nhắn tin thời gian thực, tích hợp tệp đính kèm từ File Service của phân hệ nền tảng, tìm kiếm lịch sử hội thoại và xây dựng AI Service với kiến trúc RAG để tóm tắt, phân tích và trả lời câu hỏi dựa trên ngữ cảnh.

    \item Phân tích, lựa chọn mô hình kiến trúc phù hợp: kiến trúc microservice với Messaging Service xử lý kênh và tin nhắn, WebSocket Gateway cho truyền thông thời gian thực, và AI Service tích hợp RAG kết hợp vector database để truy xuất ngữ cảnh và LLM để sinh câu trả lời.

    \item Thiết kế kiến trúc hệ thống chi tiết theo hướng nhiều dịch vụ:
    \begin{itemize}
        \item Messaging Service dùng NestJS để quản lý kênh, tin nhắn, thread và liên kết với tệp đính kèm từ File Service.
        \item WebSocket Gateway dùng NestJS kết hợp Socket.io để xử lý truyền thông thời gian thực, typing indicator và đồng bộ trạng thái.
        \item Document Processing Pipeline để trích xuất văn bản từ tệp đính kèm, chunking và tạo embedding.
        \item AI Service dùng NestJS, tích hợp vector database để truy xuất ngữ cảnh liên quan và gọi LLM để tóm tắt hội thoại, trả lời câu hỏi.
    \end{itemize}

    \item Thiết kế cơ sở dữ liệu cho các nhóm chức năng chính: kênh (channel), tin nhắn (message), thread, phản hồi (reaction), liên kết tệp đính kèm; thiết kế vector storage để lưu trữ embedding của tin nhắn và nội dung tài liệu phục vụ semantic search.

    \item Thiết kế giao diện người dùng cho trang chat bằng Next.js: xác định luồng thao tác, bố cục màn hình (danh sách kênh, khung trò chuyện, panel tệp đính kèm, panel AI assistant), cách hiển thị kết quả tóm tắt và trả lời từ AI.

    \item Xây dựng và hoàn thiện các chức năng của hệ thống theo từng giai đoạn:
    \begin{itemize}
        \item Phát triển Messaging Service với đầy đủ API quản lý kênh và tin nhắn.
        \item Triển khai WebSocket Gateway cho truyền thông thời gian thực.
        \item Xây dựng Document Processing Pipeline để xử lý tệp đính kèm và tạo embedding.
        \item Phát triển AI Service với kiến trúc RAG, tích hợp vector database và LLM.
        \item Xây dựng giao diện chat với React/Next.js.
    \end{itemize}

    \item Tích hợp AI Service với API của nhà cung cấp mô hình ngôn ngữ lớn (LLM) và embedding model để thực hiện: tạo embedding cho tin nhắn và tài liệu, truy xuất ngữ cảnh liên quan từ vector database, tóm tắt đoạn hội thoại dài, trích xuất ý chính và danh sách công việc, trả lời câu hỏi dựa trên nội dung kênh và tệp đính kèm.

    \item Thực hiện kiểm thử chức năng, kiểm thử tích hợp giữa các service và đánh giá toàn hệ thống dựa trên các tiêu chí: đáp ứng yêu cầu, tính ổn định của WebSocket, hiệu năng truy vấn vector database, thời gian phản hồi của AI Service và chất lượng câu trả lời từ RAG.
\end{itemize}

\subsubsection{Công nghệ sử dụng}

\begin{itemize}
    \item \textbf{NestJS (Node.js)}: sử dụng để xây dựng toàn bộ backend của phân hệ truyền thông bao gồm Messaging Service, WebSocket Gateway và AI Service nhờ kiến trúc module rõ ràng, hỗ trợ TypeScript, tích hợp tốt với Socket.io và dễ dàng mở rộng. NestJS cũng hỗ trợ tốt việc gọi HTTP song song và xử lý bất đồng bộ cần thiết cho pipeline xử lý tài liệu và AI.

    \item \textbf{Socket.io}: thư viện WebSocket được tích hợp với NestJS Gateway để xử lý truyền thông thời gian thực, bao gồm gửi/nhận tin nhắn tức thì, typing indicator, cập nhật trạng thái đã đọc và broadcast tin nhắn đến các thành viên trong kênh.

    \item \textbf{PostgreSQL}: cơ sở dữ liệu quan hệ lưu trữ thông tin kênh, tin nhắn, thread, phản hồi và liên kết tệp đính kèm; hỗ trợ full-text search cho tìm kiếm tin nhắn và tích hợp pgvector extension cho vector storage.

    \item \textbf{pgvector}: extension của PostgreSQL cho phép lưu trữ và truy vấn vector embedding, hỗ trợ các thuật toán tìm kiếm nearest neighbor (HNSW, IVFFlat) để thực hiện semantic search trên nội dung tin nhắn và tài liệu đính kèm phục vụ kiến trúc RAG.

    \item \textbf{Redis}: lưu trữ dữ liệu tạm thời, cache kết quả truy vấn và quản lý session WebSocket. Redis còn được sử dụng làm adapter cho Socket.io để hỗ trợ horizontal scaling khi có nhiều instance WebSocket Gateway, đồng thời làm backend cho hàng đợi xử lý bất đồng bộ.

    \item \textbf{BullMQ}: thư viện message queue dựa trên Redis, dùng để xử lý các tác vụ bất đồng bộ như tạo embedding cho tin nhắn mới, xử lý tài liệu đính kèm (trích xuất văn bản, chunking), tóm tắt hội thoại theo lịch mà không block request chính từ người dùng.

    \item \textbf{OpenAI API}: sử dụng API của OpenAI cho hai mục đích chính: (1) Embedding API (text-embedding-3-small hoặc text-embedding-3-large) để tạo vector embedding cho tin nhắn và nội dung tài liệu; (2) Chat Completion API (GPT-4o-mini hoặc GPT-4o) để tóm tắt hội thoại, trích xuất thông tin và trả lời câu hỏi dựa trên ngữ cảnh được truy xuất từ vector database.

    \item \textbf{LangChain}: framework hỗ trợ xây dựng ứng dụng AI, được sử dụng để thiết kế pipeline RAG bao gồm: document loader để đọc các định dạng file khác nhau, text splitter để chunking văn bản, vector store integration để tương tác với pgvector, và chain/agent để kết hợp retrieval với LLM.

    \item \textbf{pdf-parse, mammoth, tesseract.js}: các thư viện xử lý tài liệu để trích xuất văn bản từ file PDF (pdf-parse), file DOCX (mammoth) và hình ảnh có chữ (tesseract.js với OCR), phục vụ cho việc tạo embedding và đưa vào vector database.

    \item \textbf{Next.js (React)}: dùng để xây dựng giao diện web cho trang chat, tận dụng khả năng kết hợp SSR/CSR để tối ưu hiệu năng và trải nghiệm người dùng khi tải lịch sử tin nhắn và tương tác thời gian thực.

    \item \textbf{Tailwind CSS và shadcn/ui}: hỗ trợ thiết kế giao diện chat hiện đại, nhất quán, với các component sẵn có cho input, button, dropdown, modal và các thành phần UI phổ biến trong ứng dụng nhắn tin.

    \item \textbf{Zustand}: thư viện quản lý state nhẹ cho React, dùng để quản lý trạng thái phức tạp của ứng dụng chat như danh sách kênh, tin nhắn theo từng kênh, trạng thái kết nối WebSocket và kết quả từ AI.

    \item \textbf{Socket.io-client}: thư viện client-side để kết nối WebSocket từ frontend React đến WebSocket Gateway, xử lý các sự kiện real-time và tự động reconnect khi mất kết nối.
\end{itemize}

\subsubsection{Công cụ hỗ trợ xây dựng và phát triển}

\begin{itemize}
    \item Công cụ lập trình: Visual Studio Code.
    \item Công cụ quản lý và truy vấn cơ sở dữ liệu: DataGrip.
    \item Công cụ kiểm thử API: Postman.
    \item Công cụ kiểm thử WebSocket: Postman WebSocket.
    \item Công cụ container hóa và triển khai: Docker, Docker Compose.
    \item Công cụ quản lý mã nguồn: Git, GitHub.
\end{itemize}