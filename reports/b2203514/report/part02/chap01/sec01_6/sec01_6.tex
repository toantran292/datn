\subsection{Phân tích đánh giá các giải pháp}

Để xây dựng phân hệ truyền thông tích hợp AI cho nền tảng quản lý dự án Agile, em đã lựa chọn giải pháp dựa trên các tiêu chí: hiệu suất real-time, khả năng mở rộng, chất lượng tìm kiếm ngữ nghĩa và trải nghiệm người dùng. Cụ thể:

\begin{itemize}
    \item \textbf{Ngôn ngữ và nền tảng phát triển}
    \begin{itemize}
        \item \textbf{TypeScript:} Sử dụng cho cả Frontend (Next.js) và Backend (NestJS), đảm bảo type safety và maintainability xuyên suốt codebase.
        \item \textbf{Node.js 18 LTS:} Runtime hiệu năng cao, phù hợp cho ứng dụng I/O-intensive như chat real-time.
    \end{itemize}

    \item \textbf{Frontend Framework}
    \begin{itemize}
        \item \textbf{React.js/Next.js:} Xây dựng giao diện chat hiện đại, tái sử dụng component. Next.js hỗ trợ SSR để tối ưu tốc độ tải trang ban đầu.
        \item \textbf{Zustand:} Quản lý state nhẹ và hiệu quả cho ứng dụng chat với nhiều kênh và tin nhắn.
        \item \textbf{Socket.io-client:} Kết nối WebSocket ổn định với auto-reconnect và fallback mechanisms.
        \item \textbf{Tailwind CSS + shadcn/ui:} Thiết kế giao diện nhất quán, dễ customize và responsive.
    \end{itemize}

    \item \textbf{Backend Framework}
    \begin{itemize}
        \item \textbf{NestJS:} Framework Node.js với kiến trúc module hóa, dependency injection và TypeScript native support. Phù hợp xây dựng các services: Messaging Service, WebSocket Gateway, AI Service, Document Processing Service.
        \item \textbf{NestJS Gateway + Socket.io:} Xử lý WebSocket connections với room management, cho phép broadcast tin nhắn đến đúng kênh và hỗ trợ horizontal scaling qua Redis adapter.
    \end{itemize}

    \item \textbf{Real-time Communication}
    \begin{itemize}
        \item \textbf{Socket.io:} Thư viện WebSocket phổ biến với các tính năng: auto-reconnection, room/namespace management, binary streaming, fallback to polling. Tích hợp tốt với NestJS Gateway.
        \item \textbf{Redis Adapter:} Cho phép nhiều instance WebSocket Gateway giao tiếp với nhau, hỗ trợ horizontal scaling khi số lượng kết nối tăng.
    \end{itemize}

    \item \textbf{Quản lý và lưu trữ dữ liệu}
    \begin{itemize}
        \item \textbf{PostgreSQL 15+:} CSDL quan hệ mạnh mẽ cho lưu trữ kênh, tin nhắn, thread. Hỗ trợ full-text search với GIN index cho tìm kiếm tin nhắn.
        \item \textbf{pgvector Extension:} Mở rộng PostgreSQL hỗ trợ lưu trữ và truy vấn vector embedding. Sử dụng HNSW index cho approximate nearest neighbor search với hiệu năng cao.
        \item \textbf{Redis 7+:} Caching layer, session storage cho WebSocket connections, và message broker cho BullMQ.
    \end{itemize}

    \item \textbf{Message Queue và Background Jobs}
    \begin{itemize}
        \item \textbf{BullMQ:} Queue system dựa trên Redis, xử lý các tác vụ bất đồng bộ: tạo embedding cho tin nhắn mới, xử lý tài liệu đính kèm, tóm tắt hội thoại theo lịch.
        \item \textbf{Retry và Dead Letter Queue:} Đảm bảo không mất dữ liệu khi có lỗi trong quá trình xử lý.
    \end{itemize}

    \item \textbf{Tích hợp AI và RAG (Retrieval-Augmented Generation)}
    \begin{itemize}
        \item \textbf{OpenAI Embedding API:} Sử dụng model text-embedding-3-small hoặc text-embedding-3-large để tạo vector embedding cho tin nhắn và nội dung tài liệu, phục vụ semantic search.
        \item \textbf{OpenAI Chat Completion API:} Sử dụng GPT-4o-mini hoặc GPT-4o cho các tác vụ: tóm tắt hội thoại, trích xuất action items, trả lời câu hỏi dựa trên ngữ cảnh.
        \item \textbf{LangChain:} Framework hỗ trợ xây dựng pipeline RAG, bao gồm document loaders, text splitters, vector store integration và chain composition.
    \end{itemize}

    \item \textbf{Document Processing}
    \begin{itemize}
        \item \textbf{pdf-parse:} Trích xuất văn bản từ file PDF.
        \item \textbf{mammoth:} Chuyển đổi và trích xuất văn bản từ file DOCX.
        \item \textbf{tesseract.js:} OCR (Optical Character Recognition) cho hình ảnh chứa văn bản, chạy trên browser hoặc Node.js.
    \end{itemize}

    \item \textbf{Tích hợp với phân hệ nền tảng}
    \begin{itemize}
        \item \textbf{File Service Integration:} Sử dụng API của File Service từ phân hệ nền tảng để lưu trữ và truy xuất tệp đính kèm, đảm bảo thống nhất về storage và phân quyền.
        \item \textbf{Authentication:} Sử dụng JWT token được cấp bởi Account Service của phân hệ nền tảng, xác thực qua API Gateway.
    \end{itemize}

    \item \textbf{Search và Indexing}
    \begin{itemize}
        \item \textbf{Hybrid Search:} Kết hợp full-text search (PostgreSQL GIN index) và semantic search (pgvector) để cung cấp kết quả tìm kiếm chính xác và liên quan.
        \item \textbf{Chunking Strategy:} Sử dụng recursive text splitter với overlap để chia nhỏ tài liệu dài, đảm bảo context được bảo toàn trong mỗi chunk.
    \end{itemize}
\end{itemize}

\textbf{Đánh giá tổng quan:} Kết hợp các công nghệ trên đáp ứng tốt mục tiêu về hiệu năng real-time, chất lượng tìm kiếm ngữ nghĩa và trải nghiệm người dùng của hệ thống nhắn tin. Socket.io với Redis adapter đảm bảo khả năng mở rộng horizontal khi số lượng kết nối tăng. Kiến trúc RAG với pgvector và LLM cho phép AI hiểu và trả lời câu hỏi dựa trên ngữ cảnh hội thoại thực tế. Giải pháp đáp ứng đầy đủ yêu cầu đề tài, đồng thời phù hợp xu hướng phát triển ứng dụng chat và AI hiện đại.